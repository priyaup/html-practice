/* library-search-assist @version @0.0.0-76@9I5STFHEC @published Thu Feb 05 2015 16:09:09 GMT-0800 (PST)*/
YUI.add("search-assist-advanced-suggestions-plugin",function(i){var h,n=function(){n.superclass.constructor.apply(this,arguments)},m="suggest-markup-has-been-attached-to-DOM",l="zero-suggestions-rendered-to-DOM",k=function(b){this.suggestionText=b.suggestionText,this.label=b.label,this._generateMarkup()},j=function(b){this.value=b.value,this.label=b.label,this._generateMarkup()};k.prototype={_generateMarkup:function(){this.markup='<span class="'+this.cssClass+'">'+this.label+"</span>"},toString:function(){return this.suggestionText},cssClass:"site suggestionToken"},j.prototype={_generateMarkup:function(){this.markup='<span class="'+this.cssClass+'">'+this.label+"</span>"},toString:function(){return""},onSubmit:function(b){b.target.evtFacade.target.ancestor("form").append('<input type="hidden" name="vl" value="'+this.value+'"/>'),b.target.evtFacade.target.ancestor("form").append('<input type="hidden" name="fl" value="1"/>')},cssClass:"country suggestionToken"},h={database:{french:new j({suggestionText:"",value:"lang_fr",label:"in French"}),ebay:new k({suggestionText:"site:ebay.com",label:"Ebay.com"}),craigslist:new k({suggestionText:"site:craigslist.org",label:"Craigslist.org"}),amazon:new k({suggestionText:"site:amazon.com",label:"Amazon.com"}),zillow:new k({suggestionText:"site:zillow.com",label:"Zillow.com"}),cnn:new k({suggestionText:"site:cnn.com",label:"Cnn.com"}),mashable:new k({suggestionText:"site:mashable.com",label:"Mashable.com"}),reddit:new k({suggestionText:"site:reddit.com",label:"Reddit.com"})},getSuggestions:function(a){var t,s,r=i.Lang.trim(a),q=r.split(" "),p=q.length,o={suggestions:[],text:""};for(t=0;p>t;t++){s=this.database[q[t].toLowerCase()],s&&(q.splice(t,1),p--,t--,o.suggestions.push(s))}return o.text=q.join(" "),o}},i.mix(n,{NAME:"search-assist-advanced-suggestions-plugin",NS:"AdvancedSuggestions",ATTRS:{}}),i.extend(n,i.Plugin.Base,{initializer:function(){i.log("instantiating the advanced Search plugin","debug"),this.doAfter(m,this._prependAdvancedSuggestions),this.doAfter(l,this._prependAdvancedSuggestions)},_prependAdvancedSuggestions:function(s){var r,q,p=this.get("host"),o=h.getSuggestions(s.query),b={markup:"",suggestionText:o.text+" ",prepend:!0},a=o.suggestions.length;for(r=0;a>r;r+=1){q=o.suggestions[r],b.markup+=q.markup+" ",b.suggestionText+=q+" ",q.onSubmit&&p.on("search-assist-form-submit",i.bind(q.onSubmit,q))}o.suggestions.length&&(b.markup+=o.text,p.addSuggestion(b))}}),i.AdvancedSuggestionsPlugin=n},"1.0.0",{requires:["plugin","base-pluginhost"]}),YUI.add("search-assist-aria-plugin",function(h){var g,l="suggest-markup-has-been-attached-to-DOM",k="search-assist-tray-removed",j="search-assist-suggestion-selected",i="sa-aria-live-region";g=function(){g.superclass.constructor.apply(this,arguments)},h.mix(g,{NAME:"search-assist-aria-plugin",NS:"aria",ATTRS:{suggestionBoxClosedText:{value:"Suggestion box closed"},newSuggestionsShownText:{setter:function(d){var c="";return c=d.trending?c+d.count+" new trending suggestions shown":c+d.count+" new suggestions shown"}},suggestionSelectedText:{setter:function(d){var c="";return d&&(c="suggestion selected, "+d+", press arrow-right key to autocomplete or, press enter to search"),c}}}}),h.extend(g,h.Plugin.Base,{initializer:function(){this.aria_plugin_subscr={};var a,c=this.get("host");h.log("instantiating the ARIA plugin #######################","debug"),c.get("quietMode")===!1&&c.get("searchBox").setAttribute("aria-haspopup",!0),this.aria_plugin_subscr.SA_ARIA_EVT_SUGGEST_MARKUP_RENDERED=this.doAfter(l,this._handleTrayHasBeenRendered),this.aria_plugin_subscr.EVT_SUGGESTIONS_HAS_BEEN_REMOVED=this.doAfter(k,this._handleTrayHasBeenRemoved),this.aria_plugin_subscr.EVT_SUGGESTION_SELECTED=this.doAfter(j,this._handleSuggestionSelected),a=this._liveRegion=h.Node.create('<div role="status" class="'+i+'" aria-live="polite"></div>'),this.aria_plugin_subscr.NODE_LIVE_REGION=a,a.setStyles({position:"absolute",left:"-9999px"}),h.one("body").append(a)},_handleTrayHasBeenRemoved:function(){this._liveRegion&&(this._liveRegion.setContent("<p>"+this.get("suggestionBoxClosedText")+"</p>"),this._liveRegion.setAttribute("aria-expanded","false"))},_handleTrayHasBeenRendered:function(a){var r,q,p=this.get("host"),o=p.get("tray"),n=o.Node,m=o.len;n&&(r=n.all("> ul"),q=n.all("> ul *"),h.Lang.isNumber(m)?(a.trending?(this.set("newSuggestionsShownText",{count:m,trending:!0}),this._liveRegion.setContent("<p>"+this.get("newSuggestionsShownText")+"</p>")):(this.set("newSuggestionsShownText",{count:m,trending:!1}),this._liveRegion.setContent("<p>"+this.get("newSuggestionsShownText")+"</p>")),this._liveRegion.setAttribute("aria-expanded","true")):this._liveRegion.setAttribute("aria-expanded","false"),r.each(function(b){b.setAttribute("role","listbox")}),q.each(function(b){b.setAttribute("role","option")}))},_handleSuggestionSelected:function(b){this._liveRegion&&b.suggestion&&(this.set("suggestionSelectedText",b.suggestion),this._liveRegion.setContent("<p>"+this.get("suggestionSelectedText")+"</p>"))},destroy:function(){var a,d=this.aria_plugin_subscr;if(d){for(a in d){d.hasOwnProperty(a)&&(h.log("aria: unplugging "+a,"debug"),h.Lang.isFunction(d[a].purge)&&d[a].purge(),h.Lang.isFunction(d[a].detach)&&d[a].detach(),h.Lang.isFunction(d[a].remove)&&d[a].remove(),delete d[a])}}}}),h.namespace("SEARCHASSIST").AriaPlugin=g},"1.0.0",{requires:["plugin","base-pluginhost"]}),YUI.add("search-assist-client",function(ab,aa){var Z="client",Y="searchBox",X="searchForm",W="show-fake-box-hint",V=400,U=0,T=4,S=10,R=8,Q=13,P=9,O=32,N=39,M=37,K=38,J=40,I=229,H=197,G="search-assist-form-submit",F="query-emptiness",E="valuechange",D="search-assist-new-confidence",C="search-assist-ghost-box-rendered",B="suggest-markup-has-been-attached-to-DOM",L="zero-suggestions-rendered-to-DOM";Z=function(){Z.superclass.constructor.apply(this,arguments)},ab.mix(Z,{NAME:"Sa-Client",ATTRS:{}}),ab.SEARCHASSIST.CLIENT=ab.Base.create(Z,ab.SEARCHASSIST.CORE,[ab.SEARCHASSIST.TRAY,ab.SEARCHASSIST.MOBILE,ab.SEARCHASSIST.NAVIGATE,ab.SEARCHASSIST.LINKTRACK],{submitListeners:[],clientInit:function(){this.publishClientEvts()},initializer:function(b){var a=this.get(Y);ab.log("instantiating CLIENT","debug",aa),this.get("quietMode")||this.clientInit(b),this._confidence=0,this._prevSuggestion="",this._confidenceCounter=0,a&&a.hasAttribute("autofocus")&&a.focus()},setEventsForFakeBox:function(){var a=this,f=this.get(Y),d=this._allSubscr||{};d._srchNodeKeyDownFakeBox=f.on("keydown",function(i){var h,g,b;!a.get("fakeBoxNode").get("value")||i.keyCode!==P&&i.keyCode!==N||(h=a.getQuery(),a.logAutoCompletion(h,a.get("fakeBoxNode").get("value"),1)),a.get("fakeBox")&&a.get("fakeBox").autoCompleteOnReturnKey&&i.keyCode===Q&&a.get("fakeBoxNode").get("value")&&a.get("searchBox").set("value",a.get("fakeBoxNode").get("value")),ab.UA.webkit&&i.keyCode===Q&&a.get("fakeBox")&&(g=a.get("fakeBoxNode"),b=ab.one("#fbdum"),g&&g.remove(),b&&b.remove())}),d._srchNodeKeyUpFakeBox=f.on("keyup",function(e){if(ab.UA.webkit&&e.keyCode===Q&&a.get("fakeBox")){var b=a.get("fakeBoxNode");b||a.get("ieTillEight")||a.initFakeBoxNode()}(e.keyCode===J||e.keyCode===K||e.keyCode===N||e.keyCode===M||e.keyCode===P)&&a.resetFBox()}),ab.one("#fbdum").on("click",function(){a.resetFBox(),f.focus()}),this.on(L,function(){a.resetFBox()}),this.on(B,function(b){var i=b.firstSuggestion,h=b.query,g=this.get("fakeBoxNode");return g&&g.get("value")&&0!==g.get("value").indexOf(h,0)&&a.resetFBox(),""===h||a._prevSuggestion!==i.toLowerCase()?void a.resetFBox():void 0}),this.on(D,function(e){var b=e.query;""!==b&&(a.ghost&&a.ghost.cancel(),a.ghost=ab.later(V,this,function(){a.ghostAutoComplete(e)}))}),f.on("click",function(){a.resetFBox()}),this.get("ieTillEight")||f.get("parentNode").on("click",function(){f.focus()})},initFakeBoxNode:function(){var j,d="fakeBox",p="fakeBoxHint",o=this.get(Y),n='<div id="fbdum" style="position:absolute; left:0; right:0; top:0; bottom:0;z-index:-1"></div>',m='<input id="'+d+'"type="text" class="fakebox" aria-hidden="true" autocomplete="off" autocorrect="off" dir="ltr" />',l="",k=this.get("fakeBox").fakeBoxHintText;this.get("fakeBox").fakeBoxHint&&k&&k.length>0&&(l='<span id="'+p+'" class="fakeBoxHint">'+k+"</span>"),o.get("parentNode").append(m),o.get("parentNode").append(n),l&&o.get("parentNode").append(l),j=this.get("fakeBoxNode"),j.setStyles({"border-radius":o.getStyle("border-radius"),margin:o.getStyle("margin"),fontSize:o.getStyle("fontSize"),fontFamily:o.getStyle("fontFamily"),paddingLeft:o.getStyle("paddingLeft"),paddingRight:o.getStyle("paddingRight"),paddingTop:o.getStyle("paddingTop"),paddingBottom:o.getStyle("paddingBottom"),marginLeft:o.getStyle("marginLeft"),marginTop:o.getStyle("marginTop"),marginBottom:o.getStyle("marginBottom"),marginRight:o.getStyle("marginRight"),borderLeftWidth:o.getStyle("borderLeftWidth"),borderRightWidth:o.getStyle("borderRightWidth"),borderTopWidth:o.getStyle("borderTopWidth"),borderBottomWidth:o.getStyle("borderBottomWidth"),borderLeftStyle:o.getStyle("borderLeftStyle"),borderRightStyle:o.getStyle("borderRightStyle"),borderTopStyle:o.getStyle("borderTopStyle"),borderBottomStyle:o.getStyle("borderBottomStyle"),borderLeftColor:o.getStyle("borderLeftColor"),borderRightColor:o.getStyle("borderRightColor"),borderTopColor:o.getStyle("borderTopColor"),borderBottomColor:o.getStyle("borderBottomColor"),zIndex:"-1"}),j.blur(),j.setAttribute("disabled",!0),j.setAttribute("tabindex","-1"),o.setStyle("backgroundColor","transparent"),o.setAttribute("onfocus","this.value = this.value;")},initGhostBox:function(){this.get("ieTillEight")||this.get("fakeBoxNode")||(this.initFakeBoxNode(),this.setEventsForFakeBox())},initSpellCheck:function(){var f,d="spellCheckBox",h=this.get(Y),g='<div id="'+d+'"></div>';h.get("parentNode").append(g),f=this.get("spellCheckNode"),f.setStyles({height:h.getStyle("height"),fontSize:h.getStyle("font-size"),paddingLeft:h.getStyle("padding-left"),fontFamily:h.getStyle("font-family"),margin:h.getStyle("margin"),fontWeight:h.getStyle("font-weight"),lineHeight:h.getStyle("height"),letterSpacing:h.getStyle("letter-spacing")}),f.blur(),f.setAttribute("disabled",!0),f.setAttribute("tabindex","-1"),h.setStyle("backgroundColor","transparent"),h.setAttribute("onfocus","this.value = this.value;")},initConfidence:function(){var a=this;this.on(B,function(g){var f=g.firstSuggestion,b=g.query;f&&b&&0===f.toLowerCase().indexOf(b.toLowerCase(),0)?(a._confidence=S-(f.length-b.length)/f.length*S,a._prevSuggestion===f.toLowerCase()?a._confidenceCounter<=S&&(a._confidenceCounter+=1):a._confidenceCounter=0,a._confidenceCounter>0&&(a._confidence+=a._confidenceCounter,a._confidence>=S&&(a._confidence=S))):(a._confidenceCounter=0,a._confidence=U),f&&(a._prevSuggestion=f.toLowerCase()),g._confidence=a._confidence,ab.log("confidence of suggestion close to query: "+a._confidence,"debug"),a.fire(D,g)})},adjustCase:function(e,d){var f;return e&&d?f=e+d.substr(e.length):""},spellCheck:function(p){var o,n=this.get("spellCheckNode"),m=this.getQuery(),l="[]",k=[],b=0;if(0===m.length){return void this.clearSpellCheck()}if(p.spchk){ab.log("Performing spell check","debug",aa);try{if(l=ab.JSON.parse(p.spchk),l.length%2!==0){return void this.clearSpellCheck()}for(o=0;o<l.length;o+=2){k.push(m.substring(b,l[o])),b=l[o],k.push('<span class="spellcheck">'),k.push(m.substring(b,l[o+1]+1)),k.push("</span>"),b=l[o+1]+1}k.push(m.substring(b)),k=k.join(""),n.setHTML(k)}catch(a){this.clearSpellCheck(),ab.log("Failed to parse spell check object","debug",aa)}}else{this.clearSpellCheck()}},clearSpellCheck:function(){this.get("spellCheckNode").setHTML("")},ghostAutoComplete:function(x){var w,v,u,t,s=this,r=this,i=this.get("fakeBoxNode"),f=this.get("fakeBoxHintNode"),d=s.getQuery(),b=d.toLowerCase(),a=20;return v=this._queryWidth,u=this.get(Y).get("clientWidth")-r._sbxPadLeftInt,v>u-a?(ab.log("textWidth:"+v+"greater than sbxWidth:"+u,"debug",aa),void this.resetFBox()):(f&&(a=f.get("offsetWidth")+100),t=u-v,w=x.firstSuggestion,void (i&&""!==b&&!r.isTrayTypeTrending()&&this._confidence>T?(i.set("value",w),w=this.adjustCase(d,w),i.set("value",w),this.fire(C,x),w!==this.get("searchBox").get("value")&&this.resetTabTrack(),f&&(this._firsttimehint?a>t&&this.resetFBoxHint(!0):t>=a&&(f.addClass(W),this._firsttimehint=ab.later(5000,this,function(){f.removeClass(W)})))):this.resetFBox()))},resetFBoxHint:function(e){var d=this.get("fakeBoxNode"),f=this.get("fakeBoxHintNode");d&&f&&this._firsttimehint&&(this._firsttimehint.cancel(),f.removeClass(W),e||(this._firsttimehint=!1))},resetFBox:function(){var b=this.get("fakeBoxNode");b&&(b.set("value",""),b.blur())},registerBoxEvents:function(){var r,q=this,p=q.get(Y),o=this,n=this,k=this,d=q.get("currentDevice"),b=this._allSubscr,a=q.get("spellCheck");a&&this.initSpellCheck(),"desktop"===d&&q.get("fakeBox")&&this.initGhostBox(),"desktop"===d&&this.initConfidence(),p?(ab.log("searchNode is "+p,"debug",aa),b._clientSrchNodeOnClick=p.on("click",function(e){ab.log("click caught on searchnode","debug",aa),q.get("mobileExpandMode")&&(e.stopPropagation(),e.preventDefault()),n.handleEventOnSearchBox(e,"click")}),this.get("gecko")&&(ab.log("gecko user agent..","degug",aa),r=function(){return o._geckoGeneralState?void (o._geckoGeneralState=!1):(o.fireInTheHole(),void (o._geckoGeneralState=!1))},b._clientSrchValChangeGecko=p.on("valueChange",function(c){var g,f;return o._grog&&o._grog.cancel(),o._geckoGeneralState?(o._geckoGeneralState=!1,o._valueChangeFail&&o._valueChangeFail.cancel(),void (o._valueChangeFail=ab.later(100,this,function(){if(o._geckoCaughtKeyUp){o._geckoCaughtKeyUp=!1}else{if(o._geckoCharCodeOnKeyDown===K||o._geckoCharCodeOnKeyDown===J){return}o.fireInTheHole()}}))):(g=o._geckoCharCodeOnKeyDown,f=g===K||g===J||g===N||g===M||g===R||g===O,void (f||(o._grog=ab.later(20,this,function(){r(c)}))))}),b._clientSrchKeyDownNativeGecko=p.on("keydown",function(c){o._geckoCharCodeOnKeyDown=c.charCode,o._geckoGeneralState=!0,o._geckoCaughtKeyUp=!1}),p.on("keyup",function(c){ab.log("keyup: e.keyCode:"+c.keyCode,"debug"),o._geckoGeneralState=!0,o._geckoCaughtKeyUp=!0})),b._clientSrchKeyUpNative=p.on("keyup",function(c){return c.charCode===K||c.charCode===J||c.charCode===I||c.charCode===H?(ab.log("arrow up / arrow down on keyup, as good as no keyup for native input case","debug"),void (o._nativeTrayKeyup=!1)):(o._nativeTrayKeyup=!0,void ab.log("keyup: e.charCode:"+c.charCode,"debug"))}),b._clientSrchKeyDownNative=p.on("keydown",function(c){return o._nativeTrayKeyup=!1,ab.log("keydown: e.keyCode:"+c.keyCode,"debug"),o._native!==!0||c.charCode!==O&&c.charCode!==I&&c.charCode!==H?(c.keyCode===H||c.keyCode===I?(ab.log("keydown: input from native keyboard","debug"),o._native=!0):(o._native=!1,ab.log("keydown: input from normal keyboard","debug")),void ((c.charCode===J||c.charCode===K)&&(o._d=this.get("value")))):void ab.log("native is already true and keypressed was either space or native input key","debug")}),b._clientSrchValChangeNative=p.on("valueChange",function(c){ab.log("valueChange:"+c.newVal,"debug"),o._c=c.newVal,o._p=c.prevVal,o._s=this.get("value"),o._native&&o._nativeTrayKeyup===!1&&(ab.log("updating tray","debug"),ab.log("_nativeTrayKeyup:"+o._nativeTrayKeyup,"debug"),ab.log("_native:"+o._native,"debug"),o.fireInTheHole())}),b._clientSrchValChange=p.on("valueChange",function(e){var c=e.newVal;""===c&&q.isTrendingEnabled()&&k.fireInTheHole(e)}),b._clientSrchNodeOnValueChange=p.on(E,function(f){ab.log("event-value change was captured, self.keydown = "+k.getKeyDownState(),"debug",aa);var e=o.getQuery();k.getKeyDownState()===!1&&""===e&&(ab.log("firing query emptiness","debug",aa),this.fire(F)),ab.log("query wasnt empty on event-value-change","debug",aa),n.handleEventOnSearchBox(f,E)})):ab.log("srchNode not found","error",aa);if(window.YAHOO&&window.YAHOO.CryptoOb){q.addSubmitListener(window.YAHOO.CryptoOb)}},publishClientEvts:function(){var a=this._allSubscr||{};ab.log("publishing Client events","debug",aa),ab.log("registering box event","debug",aa),this.registerBoxEvents(),a._eventFormSubmit=this.publish(G,{defaultFn:ab.bind("_defEvtFormSubmit",this)})},addSubmitListener:function(a){this.submitListeners.push(a)},handleSubmit:function(b,d){var a=false;try{var f=b.submitListeners;for(var c=0;(c<f.length&&!a);c++){a=f[c].handleSubmit(d)}}catch(e){}if(!a){d.submit()}},_defEvtFormSubmit:function(){var a=this;a.get("preventFormSubmit")?ab.log("*****************NOT submitting form ********************","debug"):(ab.log("*****************************submitting form*******************","debug"),a.handleSubmit(a,a.get(X).getDOMNode()))},trimEndSpace:function(d){var c;if(d){for(d=d.replace(/^\s+/,""),c=d.length-1;c>=0;c-=1){if(/\S/.test(d.charAt(c))){d=d.substring(0,c+1);break}}return d}return null},setSearchBoxVal:function(e){var d=this,f=d.get(Y);f&&f.set("value",e)},handleEventOnSearchBox:function(r,q){var p=this,o=this,n=this.getQuery(),m=this,l=this,b=m.get("currentDevice"),a=m.isTrendingEnabled();if("desktop"===b){if("click"===q){if(ab.log("desktop:event:"+q,"debug",aa),o.isTrayOpen()){return}""===n?a&&p.fireInTheHole(r):p.fireInTheHole(r)}if("keyup"===q){return ab.log("desktop:event:"+q,"debug",aa),void (""===n?a&&p.fireInTheHole(r):p.fireInTheHole(r))}if(q===E||q===F){return ab.log("desktop:event:"+q,"debug",aa),void (a?n&&""!==n||(ab.log("query is empty","debug",aa),this.resetFBoxHint(!1),p.getKeyDownState()===!1&&(o.isTrayOpen()&&o.isTrayTypeTrending()?ab.log("trending tray already open","debug",aa):p.fireInTheHole(r))):n&&""!==n||(this.resetFBoxHint(!1),o.isTrayOpen()&&o.removeSuggestionsMarkup()))}}("phone"===b||"tablet"===b)&&l.handleMobileEventsOnSearchBox(r,q)},isStringEmpty:function(b){return b&&""!==b&&""!==this.trimEndSpace(b)?!1:!0},getQuery:function(){var e=this,d=e.get(Y),f="";return d?(f=d.get("value"),this.isStringEmpty(f)?"":f):void 0},addSuggestion:function(d){var c=this;this.isRenderMode("tray")&&(d.mode="tray",c.addNewSuggestion(d))}})},"0.0.1",{requires:["search-assist","search-assist-tray","search-assist-mobile","search-assist-linktrack","search-assist-navigate","cache","base","node-base","jsonp","json-stringify","highlight-base","event-valuechange","escape","event-outside","event-flick","node-style","node-screen","json-stringify","cookie","datasource","datasource-jsonschema","datasource-xmlschema","datasource-arrayschema","dataschema"]}),YUI.add("search-assist-config-panel-plugin",function(j,i){var p,o="sa-config-panel",n="sa-config-panel-wrapper",m="icon-wrench",l="icon-wrench-wrapper",k="icon-wrench-wrapper-active";p=function(){p.superclass.constructor.apply(this,arguments)},j.mix(p,{NAME:"search-assist-config-panel-plugin",NS:"configui",ATTRS:{title:{valueFn:function(){var a=j.Node.create('<div class="'+o+'-title"> SA Config panel</div>'),d=this.get("panel");return d.append(a),a.setStyles({background:"#fff",color:"#000",display:"block","border-bottom":"1px solid #ccc"}),j.one("."+o+"-title")}},panel:{valueFn:function(){var a=j.Node.create('<div class="'+o+'"></div>');return a.setStyles({display:"block",border:"1px solid #ccc",padding:"10px","box-shadow":"1px 2px 10px #ccc","border-radius":"2px",background:"#fff"}),a.hide(),j.one("body").prepend(a),j.one("."+o)}},origToShow:{valueFn:function(){return this.get("host").get("configPanel").toShow}},toShow:{valueFn:function(){var a,r=this.get("host"),q=r.get("configPanel").toShow,h=[],g=0;for(j.log(q,"debug"),a=q.length,g=0;a>g;g+=1){h[q[g]]=!0}return j.log(h,"debug"),h}}}}),j.extend(p,j.Plugin.Base,{initializer:function(){this.config_plugin_subscr={},j.log("instantiating the config plugin #######################","debug"),this.isPanelHidden=!0;var a,g,f=this,e=this.get("origToShow"),d=j.one("."+o);j.Array.each(e,function(h){var c=f.createCheckBox(h);c&&f.setCheckBox(c,h)}),this.config_plugin_subscr.configTitle=this.get("title"),this.config_plugin_subscr.panelWrapper=g=j.Node.create('<div class="'+n+'"></div>'),this.config_plugin_subscr.wrench=a=j.Node.create('<div class="'+l+'"></div>'),this.config_plugin_subscr.configPanel=d,a.setHTML('<span><i class="'+m+'">setting</i></span>'),d.wrap(g),g.prepend(a),g.setStyles({display:"inline-block",position:"fixed",right:"0","z-index":"2000"}),a.setStyles({display:"block",cursor:"pointer",padding:"5px",color:"#bbb","font-size":"1.0em","float":"right"}),a.on("click",function(){f.isPanelHidden?(this.addClass(k),d.show(),f.isPanelHidden=!1):(d.hide(),this.removeClass(k),f.isPanelHidden=!0)})},createCheckBox:function(a){var r,q,h=this.get("panel"),d=this.get("host");return void 0===d.get(a)?(j.log('invalid param name provided in configpanel array ["'+a+'"]',"error"),null):this.get("toShow")[a]?(r=this.config_plugin_subscr.param=j.Node.create('<input type="checkbox" class="'+o+"-"+a+'"" name="'+a+'" value="0">'),h.append(r),q=j.one("."+o+"-"+a),q.wrap('<div class="'+a+'-wrapper"></div>'),j.one("."+a+"-wrapper").append("<span>"+a+"</span>"),q):void 0},setCheckBox:function(f,e){var h=this.get("host"),g=h.get(e);g?f.set("checked",!0):f.set("checked",!1),this.config_plugin_subscr=f.on("click",function(){h.set(e,this.get("checked"))})},destroy:function(){var b,a=this.config_plugin_subscr;if(a){for(b in a){a.hasOwnProperty(b)&&(j.log("unplugging "+b,"debug",i),j.Lang.isFunction(a[b].purge)&&a[b].purge(),j.Lang.isFunction(a[b].detach)&&a[b].detach(),j.Lang.isFunction(a[b].remove)&&a[b].remove(),delete a[b])}}}}),j.SEARCHASSIST.SaConfigUIPlugin=p},"1.0.0",{requires:["plugin","base-pluginhost"]}),YUI.add("search-assist-core",function(B,A){var z="core",y=200,x=800000,w=2,v="bck",u="t_stmp",t="csrcpvid",s="vtestid",r="mtestid",q="spaceId",p="response-received",o="no-response-received";z=function(){z.superclass.constructor.apply(this,arguments)},B.mix(z,{NAME:"Sa-Core",ATTRS:{}}),B.SEARCHASSIST.CORE=B.extend(z,B.SEARCHASSIST,{coreInit:function(){this.initCache(),this._totalHitsToCache=0,this._totalHitsToSuggestServer=0,this.get("_externalDS")&&this.initExternalDS()},initializer:function(a){B.log("instantiating CORE","debug",A),this.get("quietMode")||this.coreInit(a)},initCache:function(){this.get("allowCache")&&(this.myCache=new B.Cache({max:y,expires:x}),B.log("====Cache has been initialized====","debug",A))},flushCache:function(){this.get("allowCache")&&this.myCache&&(this.myCache.flush(),B.log("=====cache was flushed=====","debug",A))},initExternalDS:function(){var a=this.get("_externalDS"),h=a.params,g=a.url,f=h.schema;this.validateSchema(f),this._DS=new B.DataSource.Get({source:g})},validateSchema:function(a){try{if(!a){throw B.error("No schema specified")}if(!a.resultListLocator){throw B.error("No resultListLocator field inside schema"+B.JSON.stringify(a,null,"     "))}if(!a.resultFields||!a.resultFields[0]){return this._noFields=!0,void B.log("no resultFields found","warn")}if(!a.resultFields[0].key){throw B.error('No "key" param inside schema for resultFields"'+B.JSON.stringify(a,null,"     "))}this._noFields=!1,this.set("_suggArrayParam",a.resultFields[0].key)}catch(d){B.log("schema "+d,"error")}},getNormalizedData:function(h,g,l){var k,j=this,i=this.get("allowCache");return k=this.getNormalizedJson(h,g,l),i&&j.myCache.add(l,k,l),k},handleNoFieldsInSchema:function(l){var k,j,i=this,b=i.getDefaultSuggArrParam(),a=l.results;for(B.log("Expecting resultListLocator to contain suggestions as raw array data with no objects inside","warn",A),this.set("_suggArrayParam",b),k=0;k<a.length;k+=1){if(B.Lang.isObject(a[k])){return B.error("When no resultFields are specified, the listlocator is assumed to be a pure array"),l}j={},j[b]=a[k],l.results[k]=j}return l},handleCustomData:function(H,G){var F,E,D=this.get("_externalDS"),C=H.typedData||"",n=D.params,m=n.custom,l=n.schema,a=this;return E=B.Lang.isFunction(m.data)?m.data(C):B.clone(m.data),l=n.schema,F=a.getNormalizedData(E,l,C),G(F)},handleExternalDS:function(e,d){var f=this.get("_externalDS");return f.params.custom?this.handleCustomData(e,d):this.handleJsonReqest(e,d)},getNormalizedJson:function(a,h){var g,f=this;return this.validateSchema(h),B.log("=====data from server======","info"),B.log(B.JSON.stringify(a,null,"   "),"info"),B.log("=====schema provided======","info"),B.log(B.JSON.stringify(h,null,"    "),"info"),g=B.DataSchema.JSON.apply(h,a),f._noFields&&(g=f.handleNoFieldsInSchema(g)),B.log("=====normalized json data======","info"),B.log(B.JSON.stringify(g,null,"    "),"info"),g},handleJsonReqest:function(J,I){var H,G,F,E=this.get("_externalDS"),D=J.typedData||"",C=E.params,n=E.url,m=C.query,a=this;this._DS.callBack={success:function(d){var c=d.response,f=C.schema;return H=a.getNormalizedData(c,f,D),I(H)},failure:function(c){return B.log(c,"debug"),I(null)}},G=C.request+"&"+m+"="+D,F=n+G,B.log("=====request Url======","info"),B.log(F,"info"),this._DS.sendRequest({request:G,callback:this._DS.callBack})},createGossipParams:function(F){function E(){var n,m,L={},K=null,J=null,I=k.get("geo");return I&&(n=I.lat,m=I.lon,J=I.woeid,null!==n&&null!==m&&(K=m+","+n,L.latlon=K),null!==J&&(L.geoid=J)),L}var D,C,l,k=this,j=this.get("webHistory"),i=this.get("smw"),h=this.get("ultEnabled"),g=this.get("maxSuggests"),a=this.get("pubid"),H={},G=this._originalQuery||"";return 0!==a&&(H.pubid=a),l=this.getCursorPosOnSearchBox(),B.Lang.isNumber(l)&&l<F.length&&(H.ipos=l),j&&j.crumb&&j.maxSuggestions>0&&(H.f=1,H[".crumb"]=j.crumb),i&&i.crumb&&i.maxSuggestions>0&&(H[".crumb"]=i.crumb),C=E(),C.latlon&&(H.ll=C.latlon),(C.geoid||0===C.geoid)&&(H.geoid=C.geoid),H.output="sd1",H.command=encodeURIComponent(F),H.pq=encodeURIComponent(G),H.l=1,H.bm=3,H.appid=this.get("appId"),H[u]=(new Date).getTime(),H.nresults=g,H[v]=this.get("sendBCookie")?this.get("bcookie"):null,h&&(D=this.get("ult"),H[t]=encodeURIComponent(D[t]),H[s]=encodeURIComponent(D[s]),H[r]=encodeURIComponent(D[r]),H[q]=D[q]),B.mix(H,this.get("gossipParams"),!0),B.log(H,"debug"),H},handleDefaultDS:function(K,J){function I(e){var d,f=[];for(d in e){e.hasOwnProperty(d)&&f.push(d+"="+e[d])}return f.join("&")}function H(d){return B.log("jsonPSuccess for query:"+D,"debug",A),B.log(d,"debug"),b&&C.myCache.add(D,d),J(d)}function G(c){return B.log(c,"debug"),J(null)}var E=this.get("baseUrl"),D=K.typedData||"",C=this,a,n,m=this.createGossipParams(D),b=this.get("allowCache"),F=function(c){B.jsonp(c,{on:{success:H,failure:G}})};K.ylcForAutoComplete&&(E+=K.ylcForAutoComplete);a=(window.YAHOO&&window.YAHOO.CryptoOb)?window.YAHOO.CryptoOb:null;if(a){n=m.command;if(m.command){delete m.command}if(m.pq){delete m.pq}E+="?"+I(m)+"&callback={callback}";a.encryptUrl(E,"command",n,function(c){F(c)})}else{E+="?"+I(m)+"&callback={callback}";F(E)}},fireJsonData:function(j){var i,f=this,b=this.get("allowCache"),a=this.myCache;this.now&&this.now.cancel(),this.now=B.later(w,this,function(){return b&&a&&a.retrieve(j.typedData)&&(i=a.retrieve(j.typedData),i&&i.response)?(B.log("cached response","debug",A),f._totalHitsToCache+=1,void f.fire(p,{jsonData:i.response})):void this.getJsonData(j,function(d){f._totalHitsToSuggestServer+=1,d?(B.log("un-cached response","debug",A),B.log("suggest data received, firing response-received event:"+p,"debug",A),f.fire(p,{jsonData:d})):(B.log("no suggest data received, firing no-response-received event:"+o,"debug",A),f.fire(o))})})},getJsonData:function(g,f){var j=this,i=this.get("_externalDS"),h=g.typedData||"";return""!==h||j.isTrendingEnabled()?i?this.handleExternalDS(g,f):this.handleDefaultDS(g,f):f(null)}})},"0.0.1",{requires:["search-assist"]}),YUI.add("search-assist-history-suggestions-plugin",function(r){var q,p="sa-history",o="sa-history-clear",n="mb-ac-clear-btn-wrapper",m="HISTORY_CLEAR_TITLE",l="http://search.yahoo.com/history",k=3,j="suggest-markup-has-been-attached-to-DOM";q=function(){q.superclass.constructor.apply(this,arguments)},r.mix(q,{NAME:"search-assist-history-suggestions-plugin",NS:"HistorySuggestions",ATTRS:{}}),r.extend(q,r.Plugin.Base,{initializer:function(){r.log("instantiating the history Search plugin #######################","debug"),this.doAfter(j,this._highlightHistorySuggestions)},_highlightHistorySuggestions:function(w){var v,u,t,h,g,f=this.get("host"),e=f.get("webHistory"),d=f.get("tray"),c=d.Node,a=0,x=this;u=e.bcrumb,t=e.maxSuggestions||k,0===e.maxSuggestions&&(t=0),w&&w.jsonData&&(v=w.jsonData,v.r&&(h=v.r)),c&&(g=c.all("> ul li"),r.each(h,function(s,B){if(13===s.m){a+=1;var A,y,E,D=g.item(B),C=D.getAttribute("data"),z=f.get("translation")[m]||"Clear";if(t>=a){if(D.addClass(p),!u){return}y=l+"?action=del&query="+C+"&_bcrumb="+u+"&sa=1&o=js",E=function(F){F.stopPropagation();var i=document.createElement("img");i.src=y,D.remove(!0),x.flushCache()},A=r.Node.create('<span class="'+o+'">'+z+"</span>"),A.on("click",E),!f.get("mobileAutoComplete")||"phone"!==f.get("currentDevice")&&"tablet"!==f.get("currentDevice")?D.append(A):(D.one(".ac-content").insert('<td width="45" class="'+n+'"></td>',"after"),D.one("."+n).append(A))}}}))}}),r.HistorySuggestionsPlugin=q},"1.0.0",{requires:["plugin","base-pluginhost","io-base"]}),YUI.add("search-assist-linktrack",function(g,f){var j="linktrack",i="event-search-form-instrumented",h="searchForm";j=function(){j.superclass.constructor.apply(this,arguments)},g.mix(j,{NAME:"LINKTRACK",ATTRS:{}}),g.SEARCHASSIST.LINKTRACK=g.extend(j,g.SEARCHASSIST,{initializer:function(){this.ULT=g.namespace("SA").ULT,this.ULT&&(this._gprid="",g.log("Instantiating ULT for link tracking","debug",f))},_getGprid:function(){return this._gprid||""},_setGprid:function(b){return this._gprid=b||"",this._gprid},_generateLocalTimestamp:function(){var d=new Date,c=Math.round(d.getTime()/1000);return c.toString().length>9?c:null},createi13nObj:function(a){return g.config.i13n?g.mix(g.config.i13n,{spaceid:a}):g.config.i13n={spaceid:a},g.config.i13n},getUltObj:function(a,o){var n,m=this,l=this._generateLocalTimestamp(),k={};return o=o||{},n=m.get("ult"),o&&g.mix(k,o),k.t_stmp=l,k.query=a.query,k.qstrl=a.qstrl,k.pqstr=a.pqstr,k.pqstrl=a.pqstrl,k.pos=a.pos,k.n_sugg=a.n_sugg,k.gprid=this._getGprid(),k.origin=g.config.win.location.hostname,a.sec&&(k.sec=a.sec),a.slk&&(k.slk=a.slk),a.uqstr&&(k.uqstr=a.uqstr),a.uqstrl&&(k.uqstrl=a.uqstrl),k},instrumentFormSubmit:function(k){var d,p,o,n,m={},l={};this.ULT&&(d=this.get("ultEnabled"),p=this.get("ult"),o=p.spaceId,d&&o&&(n=this.get("extraUltParams")||{},l=this.getUltObj(k,n),m=this.setYlcOnAction(l,o),this.setHiddenFormItems(k,n)),this.fire(i,m))},setHiddenFormItems:function(a){var n,m,l,k=this.get("searchForm");this.get("ult");n=a.fr2,l=this,g.each({fr2:n},function(d,o){if("fr2"===o){d||(d="sb-top"),m=l.get("appId"),m=m.substr(0,m.indexOf(".yahoo.com")),d+="-"+m}else{if(!d){return}}var e=k.get(o);e||(e=g.Node.create('<input type="hidden" name="'+o+'">'),k.prepend(e)),e.set("value",d)})},setYlcOnAction:function(a,l){var k,e=this.get(h),d=e.getAttribute("action");return this.ULT.instrument?(g.log(a,"debug"),k=this.getInstrumentedUrl(d,a),e.setAttribute("action",k),g.log("Firing:"+i,"debug"),{spaceId:l,ultParams:a,instrumentedSubmitUrl:k}):void 0},getInstrumentedUrl:function(e,c){var k=this,l,o=k.get("ult").spaceId,n,m,p;n=(window.YAHOO&&window.YAHOO.CryptoOb)?window.YAHOO.CryptoOb:null;if(n){m=["query","qstrl","pqstr","pqstrl"];for(l=0;l<m.length;l++){if(c[m[l]]){delete c[m[l]]}}}return o?(this.createi13nObj(o),this.ULT.instrument?this.ULT.instrument(e,c):null):null},sendBeacon:function(e,d){if(d){var k=document.createElement("img");k.src=this.ULT.instrument(d,e)}else{this.ULT.beacon(e)}},logAutoCompletion:function(l,k,r){var q,p=this,o=this.get("ult"),n=o.spaceId,m={actn:"clk",qstrl:k.length,query:k&&encodeURIComponent(k)||"",pos:r,pqstr:encodeURIComponent(l),pqstrl:l.length,uqstr:k.substr(l.length),uqstrl:k.substr(l.length).length,gprid:p._gprid,n_sugg:p.get("tray").len,sec:"search",slk:"qryupdate",_S:n};q=this.ULT.DEFAULT_BEACON_URL,this.sendBeacon(m,q)}})},"0.0.1",{requires:["search-assist","search-assist-ult"]}),YUI.add("search-assist-mobile",function(ah,ag){var af="mobile",ae="searchBox",ad="searchBoxContainer",ac="searchForm",ab="saContainer",aa="MOBILE_EXIT_BUTTON_TITLE",Z="MOBILE_PLACEHOLDER_TITLE",Y="MOBILE_SEARCH_FOR_TITLE",X="mbxWrapperNode",W="bringtofront",V="widen-sa-tray",U="widen-search-box",T="mask-tray",S="mobile-expand-sbx-wrapper-style",Q="search-box-placeholder-for-cancel",O="mobile-expand-cancel-btn",M="mbx-sa-tray-wrapper-style",K="mb-ac-wrapper",J="mb_ac",I="ac-btn",H="ac-content",G="sa-ac-table",F="sa-clear-btn",E="sa-clear-btn-with-cancel-btn",R=500,P=100,N="query-emptiness",L="valuechange";af=function(){af.superclass.constructor.apply(this,arguments)},ah.mix(af,{NAME:"Sa-Mobile",ATTRS:{}}),ah.SEARCHASSIST.MOBILE=ah.extend(af,ah.SEARCHASSIST,{mobileInit:function(){this.publishMobileEvts()},initializer:function(a){ah.log("instantiating Mobile related","debug",ag),this.get("quietMode")||this.mobileInit(a)},publishMobileEvts:function(){var t=this,s=this,r=this,l=this,g=s.get(ac),f=s.get(ae),e=this.get(ab),d=s.get("mobileExpandMode"),b=s.get("currentDevice"),a=this._allSubscr;this._touchmoved=!1,ah.log("publishing Mobile events","debug",ag),f&&("phone"===b||"tablet"===b)&&(this._mkeyUp=!1,this._mkeyDown=!1,f.getDOMNode(!0).addEventListener("input",function(){t._mkeyUp||t._mkeyDown?(t._mkeyUp=!1,t._mkeyDown=!1):t.fireInTheHole()},!0),a._mobileNativeUp=f.on("keyup",function(){t._mkeyUp=!0}),a._mobileNativeDown=f.on("keydown",function(){t._mkeyDown=!0}),this.pullSbxToTopOnFocus(),this.get("mobileAutoComplete")&&e.addClass(K),a._clientSrchNodeOntouchEnd=f.on("click",function(c){s.get("mobileExpandMode")&&(c.stopPropagation(),c.preventDefault()),l.handleEventOnSearchBox(c,"touchend")}),d||(ah.delegate(["touchstart","click"],function(){t._clickOnSuggItem=!0},s.get(ab),"li"),ah.delegate("touchend",function(){t._clickOnSuggItem=!1},s.get(ab),"li"),a._blurOnMobileNoExpand=f.on("blur",function(){return t._clickOnSuggItem?void (t._clickOnSuggItem=!1):r._noRefresh===!0?void (r._noRefresh=!1):void r.removeSuggestionsMarkup()}))),g&&d&&("phone"===b||"tablet"===b)&&(a._traySrchBoxOnFocus=s.get(ae).on("click",function(){s.get(ad).hasClass(W)||s.get(ad).addClass(W)})),("phone"===b||"tablet"===b)&&(ah.Event.defineOutside("touchend"),a._traySrchFormOntouchEndOutside=s.get(ac).on("touchendoutside",function(){d&&l.removeMobileExpand(),t.removeSuggestionsMarkup()})),("phone"===b||"tablet"===b)&&(ah.delegate("touchend",function(c){s.get(ae).focus(),t.removeHighlightClasses(c)},s.get(ab),"li"),ah.delegate("mouseover",function(){s.get(ae).focus()},s.get(ab),"li"),ah.delegate("click",function(c){t.removeHighlightClasses(c)},s.get(ab),"li"),ah.delegate(["click","touchend"],function(){s.get(ae).focus()},s.get(ad),"*"),this._touchmoved=!1,ah.delegate(["touchend","touchmove","click"],function(c){t.handleMobileEventsOnListItems(c)},s.get(ab),"li"))},handleMobileEventsOnListItems:function(e){var d=this,f=this;return"touchmove"===e.type?void (this._touchmoved=!0):this._touchmoved===!0?void (this._touchmoved=!1):!d.get("mobileAutoComplete")||e.target.get("className")!==J&&e.target.get("className")!==I?(d.handleEventOnSuggestItem(e),d.onFormSubmission(e),void d.removeHighlightClasses(e)):(e.stopPropagation(),e.preventDefault(),d.handleEventOnSuggestItem(e,"autoComplete"),void f.get(ae).focus())},addAutoCompleteBtn:function(f){var e=f.getHTML(),h='<span class="'+J+'"></span>',g='<table class="'+G+'" width="100%" cellspacing="0" cellpadding="0" border="0"><tr> <td class="'+H+'">'+e+'</td><td width="45" class="'+I+'">'+h+"</td></tr></table>";f.setHTML(g)},handleMobileEventsOnSearchBox:function(t,s){var r,q=this,p=this,o=this.getQuery(),n=this,d=this,b=n.get("mobileExpandMode"),a=n.isTrendingEnabled();if(b&&!this.closeOnDone&&(this.closeOnDone=!0,ah.later(R,this,function(){d.closeOnDone=d.get(ae).once("blur",function(c){b?ah.later(P,d,function(){d.removeMobileExpand(c)}):ah.later(P,d,function(){d.removeSuggestionsMarkup()})})})),b&&this.addMobileExpand(),"touchend"===s&&(r=n.get(ae).get("value"),n.get(ae).set("value",r).focus()),"touchend"===s){if(p.isTrayOpen()){return}""===o?n.isTrendingEnabled()&&q.fireInTheHole(t):q.fireInTheHole(t)}return"keyup"===s?void (""===o?a&&q.fireInTheHole(t):q.fireInTheHole(t)):s===L||s===N?(ah.log("mobile:event:"+s,"debug",ag),void (a?""===this.getQuery()&&(ah.log("query is empty","debug",ag),p.isTrayOpen()&&p.isTrayTypeTrending()?ah.log("trending tray already open","debug"):(ah.log("Empty query and no tray is open so triggering tray to open","debug",ag),q.fireInTheHole(t))):!p.isTrayOpen()||o&&""!==o||p.removeSuggestionsMarkup())):void 0},widenTray:function(){function i(){j.Node.addClass(V)}function d(){n.get(ae).focus(),j&&j.Node&&l.isModeExpanded()?i():k&&l.removeMobileExpand()}var n=this,m=this,l=this,k=n.isTrendingEnabled(),j=m.getTray();d()},updateSuggOnNoSugg:function(l,k){var j,i,b=this,a=b.getTray();return ah.log("no suggestions available for the query autocompleted, so adding the same query as suggestionf or mobile","debug",ag),i=b.highlightSuggestion(l,l),j=ah.Node.create("<li>"+this.get("translation")[Y]+' "'+i+'"</li>'),j.setAttribute("pos",0),j.setAttribute("data",l),k.append(j),a.len=1,k},addMobileExpand:function(){var a,h,g=this,d=(g.get("currentDevice"),g.get(ae));ah.log("adding mobile expansion","debug"),g.get(X).addClass(S),d.addClass(U),g.get("disablePlaceHolder")||(a=this.get("translation")[Z],d.setAttribute("placeholder",a+" "+g.get("property"))),this.renderClearButton(),g.get("cancelButton")&&this.renderCancelBtn(),this.renderMaskTray(),h=g.get("saContainer"),h&&h.addClass(M)},removeMobileExpand:function(){var p,o=this,n=o.getTray(),m=ah.one("."+F),k=this,d=k.get(ae),b=ah.one("."+T),a=k.get(X),q=k.get("saContainer");q&&(ah.log("removing class mbx-sa-tray-wrapper-style","debug"),q.removeClass(M)),a&&a.removeClass(S),ah.log("removing mobile Expand","debug",ag),k.get("cancelButton")&&(p=ah.one("."+O),p&&(k.get(ae).removeClass(Q),p.hide()),m=ah.one("."+E)),this._detachCloseOnDone(),b&&b.hide(),d&&d.removeClass(U),m&&m.hide(),n&&n.Node&&n.Node.removeClass(V),o.removeSuggestionsMarkup(),k.get("disablePlaceHolder")||d.removeAttribute("placeholder")},renderMaskTray:function(){var a=ah.one("."+T),f=this,e=this;a?a.show():(a=ah.Node.create("<div></div>"),f.get(ac).append(a),a.addClass(T),a.on(["touchstart","click"],function(b){b.stopPropagation(),b.preventDefault(),e.removeMobileExpand()}))},isModeExpanded:function(){return ah.one("."+U)?!0:!1},renderCancelBtn:function(){var a,l=ah.one("."+O),k=this,j=this,h=function(c){ah.log("removing mobile expansion ##########################","debug"),c.stopPropagation(),c.preventDefault(),j.removeMobileExpand()};if(l){k.get(ae).addClass(Q),l.show()}else{try{a=this.get("translation")[aa],l=ah.Node.create('<div class="'+O+'">'+a+"</div>")}catch(d){}l&&(k.get(X).append(l),k.get(ae).addClass(Q),l.on(["touchstart","touchend","click"],h))}},renderClearButton:function(){var a=this,h=ah.one("."+F),g=a.get(ae),d=this;a.get("cancelButton")&&(h=ah.one("."+E)),h?d.isTrayTrending()&&!d.getQuery()?h.hide():d.getQuery()?h.show():h.hide():(h=ah.Node.create("<div></div>"),h.setHTML('<div class="crosshair-wrapper"><div id="clearSearchBox" class="crosshair-head" role="button" aria-label="clear search box"><div class="hair"></div><div class="hair"></div></div></div'),h.addClass(a.get("cancelButton")?E:F),a.get(X).append(h),h.on(["touchstart","click"],function(b){b.stopPropagation(),g.set("value",""),this.hide()}),h.on("touchend",function(b){b.stopPropagation()}),""===d.getQuery()&&h.hide())},_detachCloseOnDone:function(){var a=this.get(ae);this.closeOnDone&&ah.Lang.isFunction(this.closeOnDone.detach)&&(this.closeOnDone.detach(),delete this.closeOnDone,this.closeOnDone=null,a.blur(),ah.log("REMOVED close on done registeration","debug",ag))},pullSbxToTopOnFocus:function(){var a=function(){window.pageYOffset<=0&&window.scrollTo(0,1)};this.get(ae).on("focus",function(){ah.later(0,null,function(){a()})})}})},"0.0.1",{requires:["search-assist","search-assist-core","search-assist-linktrack","search-assist-navigate","intl"]}),YUI.add("search-assist-navigate",function(R,Q){var P="navigate",O="searchBox",N=1,M="sa-tray-list-container",L="list-item-selected",K="list-item-hover",J="search-assist-suggestion-selected",I=30000,H="some-activity-in-the-searchbox",G="query-emptiness",F=8,E=9,D=27,C=39,B=37,A=38,z=40,y=13,x=16,w=18;P=function(){P.superclass.constructor.apply(this,arguments)},R.mix(P,{NAME:"Sa-Navigate",ATTRS:{}}),R.SEARCHASSIST.NAVIGATE=R.extend(P,R.SEARCHASSIST,{navInit:function(){this.publishKeyboardEvts(),this._tabCount=N,this._origQuery=this.getQuery(),this.timeSinceLastKey=0},initializer:function(a){R.log("instantiating NAVIGATE","debug",Q),this._originalQuery=this.getQuery(),this.get("quietMode")||this.navInit(a)},getOrigQuery:function(){return this._origQuery},setOrigQuery:function(b){this._origQuery=b},minKeySatisfied:function(b){return b&&b.length>=this.get("minKey")?!0:!1},fireInTheHole:function(v,u){var t,s=this,r=s.getQuery(),q=this,p=this,o={},n=null,k=this,a=k.get("spellCheck");return a&&""===r&&k.clearSpellCheck(),t=this.getOrigQuery(),u&&this.get("logAutoComplete")&&k.get("ultEnabled")&&!k.get("_externalDS")&&this.ULT&&(n=this.getYlcforAutoCompleteLogging(u)),this.get("minKey")>0&&!this.minKeySatisfied(r)?void q.removeSuggestionsMarkup():(q.setRenderedTrayType(""===r&&k.isTrendingEnabled()?"trending":"normal"),this.setOrigQuery(r),R.log("firing "+H+' event: fired-typedData:"'+r+'"',"debug"),o={typedData:r,evtFacade:v},n&&(o.ylcForAutoComplete=n),void p.fire(H,o))},getYlcforAutoCompleteLogging:function(r){var q,p={},o=this,n=this,m=this,l=o.get("tray"),b={},a=n.get("extraUltParams")||{};return("tab"===r.actn||"arrow"===r.actn)&&(p.actn="keybrd"),"mb_ac"===r.actn&&(p.actn="mobile"),p.pos=r.pos,p.slk="qryupdate",p.sec="search",p.query=r.value&&encodeURIComponent(r.value)||"",p.qstrl=p.query.length,p.pqstr=r.query&&encodeURIComponent(r.query)||"",p.pqstrl=p.pqstr.length,p.uqstr=p.query&&encodeURIComponent(p.query.substr(p.pqstrl))||"",p.uqstrl=p.uqstr.length,l&&l.len&&(p.n_sugg=l.len),p.fr2="sa-gp",b=m.getUltObj(p,a),R.log("logging autocomplete","debug",Q),q=this.getInstrumentedUrl("",b)},_defEvtFireInTheHole:function(j){var i=this,e=this,b={},a=this;R.log("received "+H+" event","debug",Q),j&&(j.evtFacade&&(this.evtFacade=j.evtFacade),R.log('received typedData:"'+j.typedData+'"',"debug",Q),j.evtFacade?(R.log("received flame.evtFacade","debug",Q),j.evtFacade.charCode!==E&&(this._tabCount=N)):R.log("missed passing eventFacade in firedinthehole event","debug",Q),b.ylcForAutoComplete=j.ylcForAutoComplete||null,b.typedData=j.typedData,b.typedData?i.fireJsonData(b):a.isTrendingEnabled()===!0?(R.log("showing trending search","debug",Q),i.fireJsonData(b)):(e.removeSuggestionsMarkup(),R.log("trending search supressed","debug",Q)))},okTofollowTabIndex:function(){return R.log("_tabCount:"+this._tabCount,"debug",Q),this._tabCount===N?(this.update_tabCount(),this.isTrayOpen(),!1):(this.update_tabCount(),!0)},update_tabCount:function(){this._tabCount=(this._tabCount+1)%2},getAutoCompleteValue:function(){var a,d=R.one("."+M+" li");return d?a=decodeURIComponent(d.getAttribute("data")):null},okToAutoComplete:function(){var b=this.isAnySuggestionSelected();return b?!1:!0},handleTab:function(a){var p,o,n=this,m=this,l=m.get(O),k=m.getQuery(),d=n.getTray();if(m.isTrendingEnabled()||k){if(!k){return void n.removeSuggestionsMarkup()}if(this.okTofollowTabIndex()){return void n.removeSuggestionsMarkup()}if(a.preventDefault(),l&&d&&d.Node){if(!this.okToAutoComplete()){return void this.fireInTheHole(a)}p=this.getAutoCompleteValue(),p?(m.setSearchBoxVal(p),o={pos:1,value:p,query:k,actn:"tab"},this.fireInTheHole(a,o)):(R.log("tray exists but did not get any autocomplete suggestions","warn"),n.closeTray())}else{this.fireInTheHole(a),this.resetTabTrack()}}},getCursorPos:function(a){var h,g,f=0;return a?a.selectionStart?a.selectionStart:R.config.doc.selection&&R.config.doc.selection.createRange()?(h=R.config.doc,h.activeElement.focus(),g=h.selection.createRange(),g.moveStart("character",-h.activeElement.value.length),f=g.text.length):0:null},getCursorPosOnSearchBox:function(){var h=this,d=h.get(O),b=d.getDOMNode(),a=this.getCursorPos(b);return null===a?(R.log("unable to get cursor position","warn",Q),null):(R.log("caretPos:"+a,"debug"),a)},isCursorAttheEnd:function(){var h=this,g=h.getQuery(),b=g.length,a=this.getCursorPosOnSearchBox();return R.log("len:"+b,"debug",Q),R.log("cursorPos:"+a,"debug",Q),b===a?!0:!1},handleArrowRight:function(a){var p,o,n=this,m=this,l=m.get(O),k=m.getQuery(),d=n.getTray();if(l&&d&&d.Node){if(this.okToAutoComplete()&&this.isCursorAttheEnd()){p=this.getAutoCompleteValue(),p&&k!==p?(n._noRefresh=!0,l.blur().set("value",p).focus(),o={pos:1,value:p,query:k,actn:"arrow"},this.fireInTheHole(a,o)):R.log("tray exists but did not get any autocomplete suggestions","warn")}else{if(this.isCursorAttheEnd()){return void this.fireInTheHole(a)}}}},handleEsc:function(){var a=this,d=this;R.log("closing tray on esc press","debug"),a.removeSuggestionsMarkup(),d.get(O).blur()},resetTabTrack:function(){this._tabCount=N},isAnySuggestionSelected:function(){var a=R.one("."+M+" ."+L);return R.log("selected suggestion node:"+a,"debug",Q),a},handleArrowUp:function(T){var S,v,u,t,s,h,g,f,d=this,b=(d.get(O),0),a=[];if(R.log("ARROW UP KEY ***************","debug",Q),this.resetTabTrack(),d._native){return void d.fireInTheHole()}if(u=R.one("."+M),!u){return void this.fireInTheHole(T)}if(t=u.all("> li")){if(t.each(function(e,c){a[c]=e}),v=a.length,s=this.isAnySuggestionSelected()||R.one("."+M+" ."+K)){for(R.log("selectedSuggestion:"+s.get("text"),"debug"),b=0,h=this.getOrigQuery(),b=0;v>b;b+=1){if(a[b].hasClass(L)||a[b].hasClass(K)){if(a[b].removeClass(L),a[b].removeClass(K),0===b){d.handleNativeInputMethod(h);break}g=(b-1)%v,S=a[g].getAttribute("data"),f=a[g].getAttribute("pos"),d.handleNativeInputMethod(S,a[g]),this.fireCurrentSuggestionSelected({suggestion:S,pos:f});break}}}else{R.log("no suggestion selected :(","debug",Q),g=v-1,a[g]&&(S=a[g].getAttribute("data"),f=a[g].getAttribute("pos"),this.fireCurrentSuggestionSelected({suggestion:S,pos:f}),d.handleNativeInputMethod(S,a[g]))}}},fireCurrentSuggestionSelected:function(b){this.fire(J,b)},handleArrowDown:function(U){var T,S,v,u,t,h,g,f,d=this,b=this,a=(b.get(O),0),V=[];if(R.log("ARROW DOWN KEY ***************","debug",Q),this.resetTabTrack(),b._native){return void b.fireInTheHole()}if(v=R.one("."+M),!v){return void d.fireInTheHole(U)}if(u=v.all("> li")){if(u.each(function(e,c){V[c]=e}),S=V.length,t=this.isAnySuggestionSelected()||R.one("."+M+" ."+K)){for(a=0,h=this.getOrigQuery(),a=0;S>a;a+=1){if(V[a].hasClass(L)||V[a].hasClass(K)){if(V[a].removeClass(L),V[a].removeClass(K),a===S-1){b.handleNativeInputMethod(h);break}g=(a+1)%S,T=V[g].getAttribute("data"),f=V[g].getAttribute("pos"),this.fireCurrentSuggestionSelected({suggestion:T,pos:f}),b.handleNativeInputMethod(T,V[g]);break}}}else{R.log("no suggestion selected :( ","debug",Q),V[0]&&(T=V[0].getAttribute("data"),f=V[0].getAttribute("pos"),this.fireCurrentSuggestionSelected({suggestion:T,pos:f}),b.handleNativeInputMethod(T,V[0]))}}},handleNativeInputMethod:function(a,l){var k=this.get(O),j=k.get("value"),g=this,d=this;return""===j||d.get("allIe")||d.get("gecko")||d._c===d._d&&d._c===j||void 0===d._c||!d._native?(g._noRefresh=!0,k.blur().set("value",decodeURIComponent(a)).focus(),void (l&&l.addClass(L))):(R.log("native tray detected, updating tray","debug"),void d.fireInTheHole())},handleAnyKeySearch:function(v){var u,t,s,r,q,p=R.config.win,o=R.config.doc,m=this,d=this,a=function(b){if(s=b.keyCode,q=b.target||b.srcElement,r||(r=m.get(O).getDOMNode()),"EMBED"!==q.tagName&&"OBJECT"!==q.tagName&&"INPUT"!==q.tagName&&"TEXTAREA"!==q.tagName&&!b.altKey&&!b.metaKey&&!b.ctrlKey&&(32>s||s>40)&&9!==s&&13!==s&&16!==s&&s!==D){if(d.get("backspaceBehaviorNative")&&s===F){return}u=r.value.length,u&&(s===F?(b.preventDefault(),r.value=r.value.substr(0,r.value.length-1)):v&&(r.value=r.value+" ",u+=1),d.get("replaceQueryOnFocus")&&(r.value=""),r.setSelectionRange?r.setSelectionRange(u,u):r.createTextRange&&(t=r.createTextRange(),t.moveStart("character",u),t.select())),r.focus()}};p.addEventListener?(p.removeEventListener("keydown",this._fnCheckFocusPtr),this._fnCheckFocusPtr=a,p.addEventListener("keydown",a,!1),R.log("################### w.addEventListener","debug")):p.attachEvent&&(this.ieAnyKeyDocumentEvt&&o.detachEvent("onkeydown",this._fnCheckFocusPtr),this._fnCheckFocusPtr=a,this.ieAnyKeyDocumentEvt=o.attachEvent("onkeydown",a),R.log("################### d.attachEvent","debug"))},getKeyDownState:function(){return this.keyDown},stopMonitoringUserIdleNess:function(){var b=this._allSubscr;b._timeSinceLastkeyStroke&&b._timeSinceLastkeyStroke.cancel()},monitorUserIdleNess:function(){var a=this._allSubscr,d=this;this.noActivityForLong=!1,a._timeSinceLastkeyStroke&&(a._timeSinceLastkeyStroke.cancel(),this.timeSinceLastKey=0),a._timeSinceLastkeyStroke=R.later(2000,this,function(){d.timeSinceLastKey=d.timeSinceLastKey+2000,d.timeSinceLastKey>I&&(d.noActivityForLong=!0,a._timeSinceLastkeyStroke.cancel())},[],!0)},publishKeyboardEvts:function(){R.log("publishing default handler function for the event when there is some activity in search box","debug",Q),this.publish(H,{defaultFn:R.bind("_defEvtFireInTheHole",this)});var l=this,k=l.get(O),j=this,d=this,b=this._allSubscr,a=this.get("noSpaceOnFocus");this.keyDown=!1,b._navigateHtmlOnKeyDown=R.one("html").on("keydown",function(c){c.charCode!==F&&(j.keyDown=!0)}),b._navigateHtmlOnKeyUp=R.one("html").on("keyup",function(){j.keyDown=!1}),l.get("anyKeySearch")===!0&&j.handleAnyKeySearch(a?!1:!0),k?(b._navigateSrchNodeOnKeyDown=k.on("keydown",function(c){R.log("escape on keydown","debug"),c.charCode===D&&j.handleEsc(c),c.charCode===E&&j.handleTab(c),c.charCode===A&&c.preventDefault()}),R.later(200,this,function(){b._navigateSrchNodeOnFocus=k.on("focus",function(){""===j.getQuery()&&this.fire(G)})}),b._navigateSrchNodeOnEmptyQuery=k.on(G,function(c){d.handleEventOnSearchBox(c,G)}),b._navigateSrchNodeOnKeyUp=k.on("keyup",function(c){j.handleKeyEvent(c,"keyup")})):R.log("invalid searchNode, no keyboard or mouse or touch events registered","error",Q)},handleKeyEvent:function(j,i){var h=this,b=this,a=this;this.timeSinceLastKey=0,j.charCode===z?h.handleArrowDown(j):j.charCode===A?h.handleArrowUp(j):j.charCode===C?h.handleArrowRight(j):j.charCode===B?R.log("arrow left shouldnt do anything","info"):j.charCode===D?R.log("Esc key on keyup","debug"):j.charCode===F?""!==h.getQuery()?(R.log("backspace was pressed, query is empty - firing suggest","debug",Q),h.fireInTheHole(j)):b.isTrayTrending()&&!b.isTrayOpen()&&(R.log("backspace was pressed, tray not open, query is valid - firing suggest","debug",Q),h.fireInTheHole(j)):j.charCode===y?(h._native===!0&&(h._native=!1,a.handleEventOnSearchBox(j,i)),R.log("return key","debug")):j.charCode===w||j.charCode===x?R.log("special key pressed","debug",Q):(R.log("searchnode on keyup","debug",Q),a.handleEventOnSearchBox(j,i))}})},"0.0.1",{requires:["search-assist"]}),YUI.add("search-assist-smw-suggestions-plugin",function(j){var i,p="sa-smw",o="sa-smw-private-label",n=3,m="SMW_PRIVATE_LABEL_TITLE",l="mb-ac-clear-btn-wrapper",k="suggest-markup-has-been-attached-to-DOM";i=function(){i.superclass.constructor.apply(this,arguments)},j.mix(i,{NAME:"search-assist-history-suggestions-plugin",NS:"SmwSuggestions",ATTRS:{}}),j.extend(i,j.Plugin.Base,{initializer:function(){j.log("instantiating the SMW plugin #######################","debug"),this.doAfter(k,this._highlightSmwSuggestions)},_highlightSmwSuggestions:function(x){var w,v,u,t,s,g=this.get("host"),f=g.get("tray"),e=f.Node,d=g.get("smw"),c=g.get("translation")[m]||"Private result",a=0;x&&x.jsonData&&(w=x.jsonData,w.r&&(u=w.r)),t=d.maxSuggestions||n,0===d.maxSuggestions&&(t=0),e&&(s=e.all("> ul li"),j.each(u,function(h,r){if(31===h.m){a+=1;var q=s.item(r);t>=a&&(q.setAttribute("type","smw"),q.addClass(p),v=j.Node.create('<span class="'+o+'">'+c+"</span>"),!g.get("mobileAutoComplete")||"phone"!==g.get("currentDevice")&&"tablet"!==g.get("currentDevice")?q.append(v):(q.one(".ac-content").insert('<td width="80" class="'+l+'"></td>',"after"),q.one("."+l).append(v)))}}))}}),j.namespace("SEARCHASSIST").SmwSuggestionsPlugin=i},"1.0.0",{requires:["plugin","base-pluginhost","io-base"]}),YUI.add("search-assist-tray",function(aU,aT){var aS="tray",aR="searchBox",aQ="searchBoxContainer",aP="searchForm",aO="saFormWrapper",aN="saContainer",aM=5,aL=500,aK="TRENDING_NOW_TITLE",aJ="RELATED_TITLE",aI="m",aH=13,aG="m",aF=4,aE="m",aD=2,aC="trending",aB="normal",aA="sa-tray",az="sa-tray-list-container",ay="trending-title",ax="related-title",aw="list-item-selected",av="list-item-hover",au="trans-hide",at="spcl-sugg",ar="trending-label-position",aq="related-label-position",ap="sub-assist",ao="absolute",an="no-wrap",am="truncation",al="measurer-absolute",ak="measurer-no-wrap",aj="measurer-no-overflow",ai="branding",ah="response-received",ag="search-assist-tray-showing",af="no-response-received",ae="suggest-markup-has-been-attached-to-DOM",ad="zero-suggestions-rendered-to-DOM",ac="before-suggest-markup-has-been-attached-to-DOM",ab="search-assist-tray-removed",aa="search-assist-suggestion-selected",Z="search-assist-tray-click-outside",Y="search-assist-form-submit",X="tray";aS=function(){aS.superclass.constructor.apply(this,arguments)},aU.mix(aS,{NAME:"Sa-Tray",ATTRS:{tray:{},cloud:{}}}),aU.SEARCHASSIST.TRAY=aU.extend(aS,aU.SEARCHASSIST,{trayInit:function(){this.publishTrayEvts(),this.set("tray",{}),this._curSuggestion="",this._curPos="",this._firstSuggestion=""},initializer:function(a){aU.log("instantiating TRAY","debug",aT),this.get("quietMode")||this.trayInit(a),this.get("configPanel")&&this.plug(aU.SEARCHASSIST.SaConfigUIPlugin),this.get("ariaPlug")&&this.plug(aU.SEARCHASSIST.AriaPlugin),this._sbxPadLeftInt=this.getSearchBoxPadding("left")||0,this._sbxPadRightInt=this.getSearchBoxPadding("right")||0,this._queryWidth=0,this._offsetWidth=0,this._isWidthComputed=0,this._subAssistReady=!1},publishTrayEvts:function(){var h=this,g=this,f=g.get(aP),b=g.get("currentDevice"),a=this._allSubscr;aU.log("publishing Tray events","debug",aT),this.publish(ah,{defaultFn:aU.bind("_defEvtRespRecvdFn",this)}),this.publish(ae,{defaultFn:aU.bind("_defEvtSuggestMarkupRendered",this)}),this.publish(af,{defaultFn:aU.bind("_defEvtNoRespRecvdFn",this)}),g.get("autoAlign")&&this.alignTrayRegisteration(),a._traySuggestionSelect=g.on(aa,function(c){h._curSuggestion=c.suggestion,h._curPos=parseInt(c.pos,10)}),f&&(a._traySrchFormOnSubmit=f.on("submit",function(c){h.onFormSubmission(c)}),a._traySrchFormWrapperOnClickOutside=g.get(aO).on("clickoutside",function(){aU.log("clickoutside captured on ","debug",aT),h.removeSuggestionsMarkup(),h.fire(Z)})),"desktop"===b&&(aU.delegate("mouseover",function(){h.removeAllListHighlights(),this.addClass(av)},g.get(aN),"li"),aU.delegate("mouseout",function(c){h.removeHighlightClasses(c)},g.get(aN),"li"),aU.delegate(["click"],function(c){h.handleEventOnSuggestItem(c),h.onFormSubmission(c),h.removeHighlightClasses(c)},g.get(aN),"li"))},getTray:function(){return this.get("tray")},isTrayEmpty:function(){var a=aU.one("."+az+" li");return a?(aU.log("trays first list element:"+a,"debug"),!1):!0},getSuggestData:function(d){var c;return c=decodeURIComponent(d.currentTarget.getAttribute("data"))},getSuggestPosition:function(d){var c;return c="B"===d.target.get("nodeName").toUpperCase()?d.target.get("parentNode").getAttribute("pos"):d.currentTarget.getAttribute("pos"),c=parseInt(c,10)},removeAllListHighlights:function(){aU.all("."+az+" ."+av).removeClass(av),aU.all("."+az+" ."+aw).removeClass(aw)},restoreFormAction:function(){var d,c=this.get("searchForm");d=this.get("action"),c.setAttribute("action",d)},customizeFormAction:function(){var a,f,e;this.restoreFormAction(),a=this.get("searchForm"),f=this.get("action"),this.get("ylt")?e=f.replace(this.get("ylt"),this.get("yltCustom")):(e=";"===f[f.length-1]?f+this.get("yltCustom"):f+";"+this.get("yltCustom"),aU.log("no default ylt token found on form action to replace it with customYlt","warn")),a.setAttribute("action",e)},onFormSubmission:function(z){var y,x,w,v=this,u={},t=this,s=v.get("tray"),r=this,q=this,j=this,b=0,a=q.get("mobileExpandMode");z.preventDefault(),this.get("ultEnabled")&&!this.get("_externalDS")&&j.ULT&&this.get("ult")&&this.get("ult").spaceId&&(y={pqstr:"",n_sugg:0,pos:0,query:"",pqstrl:"",qstrl:""},s&&s.len&&(b=s.len),w=this.getOrigQuery()||"",y.pqstr=w&&encodeURIComponent(w)||"",y.pqstrl=w.length,y.n_sugg=b,"click"===z.type||"touchend"===z.type||"gesturemoveend"===z.type?(this.get("yltCustom")&&this.customizeFormAction(),s.Node.getAttribute("type")==="trending"&&this.isTrendingTitleEnabled()&&this.get("searchForm").one('input[name="fr"]').set("value","sfp-tts-s"),y.fr2="sa-gp",y.pos=v.getSuggestPosition(z),"number"!=typeof y.pos&&(y.pos=0),x=v.getSuggestData(z)):x=t.getQuery(),"submit"===z.type&&(x===this._curSuggestion?(this.get("yltCustom")&&this.customizeFormAction(),y.fr2="sa-gp",y.pos=this._curPos,"number"!=typeof y.pos&&(aU.log("ULT:error:position of click/touch of suggestion undefined","error",aT),y.pos="")):(y.pqstr="",y.pqstrl="")),y.query=x&&encodeURIComponent(x)||"",y.qstrl=y.query.length,j.instrumentFormSubmit(y)),s&&s.Node&&s.Node.addClass(au),aU.later(aL,this,function(){aU.log("time for suggest markup to be removed look for : TIME_BEFORE_SUGGEST_MARKUP_IS_REMOVED","debug",aT),a&&(aU.log("inside Form SUbmission and now removing mobile expand","debug",aT),r.removeMobileExpand()),v.removeSuggestionsMarkup()}),z.currentTarget&&(u=z.currentTarget),aU.log("firing event:"+Y,"debug",aT),this.fire(Y,{suggestionNode:u}),this._originalQuery=""},handleEventOnSuggestItem:function(v,u){var t,s,r,q,p,o=this,n=this,m=this.get(aR),d=this;return t=n.getSuggestData(v),s=t.toString(),p=this.getSuggestPosition(v),q=this.getQuery(),o.setSearchBoxVal(t),u?(t+=" ",n._noRefresh=!0,m.blur().set("value",t).focus(),r={pos:p,value:t,query:q,actn:"mb_ac"},d.fireInTheHole(v,r),void this.logAutoCompletion(q,s,p)):void 0},resizeTray:function(){var a=this,p=a.get(aR),o=a.get(aQ),n=p.get("clientWidth"),m=p.get("clientHeight"),l=p.getXY(),e=l[1]+m,d=10;this.resizeSa&&this.resizeSa.cancel(),this.resizeSa=aU.later(0,this,function(){this.isWidthComputed=!1,l=p.getXY(),n=p.get("clientWidth"),(l!==this.searchBoxPos||n!==this.searchBoxWidth)&&(this.searchBoxPos=l,this.searchBoxWidth=n,e=l[1]+m,d=10,l[1]=e+d,aU.log("searchBoxWidth:"+n,"debug"),aU.log("searchBoxHeight:"+m,"debug"),aU.log(l,"debug"),o.setStyles({width:n+"px"}),o.setXY(l))})},alignTrayDeregisteration:function(){var e=this._allSubscr,d=this,f=d.get(aQ);e&&e._trayAutoAlignOnResize&&e._trayAutoAlignOnResize.detach(),f.setStyles({position:"",width:"","margin-top":"",left:"",top:""})},alignTrayRegisteration:function(){var t=this,s=this._allSubscr,r=t.get(aR),q=t.get(aQ),p=r.get("clientWidth"),o=r.get("clientHeight"),e=r.getXY(),d=e[1]+o,b=this,a=10;e[1]=d+a,aU.log("searchBoxWidth:"+p,"debug",aT),aU.log("searchBoxHeight:"+o,"debug",aT),aU.log(e,"debug",aT),q.setStyles({position:"absolute",width:p+"px","margin-top":"1px"}),q.setXY(e),s._trayAutoAlignOnResize=aU.on("resize",b.resizeTray,aU.config.win,this)},removeHighlightClasses:function(b){b&&b.currentTarget&&(b.currentTarget.removeClass(av),b.currentTarget.removeClass(aw))},attachTrendingTrayLabels:function(){var a,h,g=aU.one("."+ay),f=aU.one("."+ax);g&&g.remove(),f&&f.remove(),a=aU.one("."+ar),a&&(g=aU.Node.create("<span></span>"),g.addClass(ay),g.setContent(this.get("translation")[aK]),a.insertBefore(g,a)),h=aU.one("."+aq),h&&(f=aU.Node.create("<span></span>"),f.addClass(ax),f.setContent(this.get("translation")[aJ]),h.insertBefore(f,h))},highlightSuggestion:function(r,q,p){var o,n,m,l=q.split(/[\s|,]/),k="",a=this.get("disableHighlight");if(a){return r}for(o=0;o<l.length;o+=1){n=l[o],l[o]=l[o].replace(/[;\?,:\'\/.%\*&\\\(\)\^]/g,""),l[o]&&(k=k+n+" ")}return(k=this.trimEndSpace(k))?(m=p||r,k=k.split(" "),aU.Highlight.all(m,k)):r},isTrayOpen:function(){var a=this.get("tray");return a&&a.Node?(aU.log("tray and tray.Node exist","debug",aT),!0):(aU.log("tray or tray.Node doesnt exist yet","debug",aT),!1)},closeTray:function(){var b=this;b.isTrayOpen()&&b.removeSuggestionsMarkup()},buildTrayNode:function(){var a=this,f=a.get(aN),e=this.get("tray");return e.Node||(e.Node=aU.Node.create("<div></div>"),e.Node.addClass(aA),f.append(e.Node)),e.Node},buildEmptyTray:function(){var a=aU.Node.create("<ul></ul>");return a.addClass(az),a},buildTray:function(a){aU.log("building TRAY","debug",aT),this.buildTrayNode(),this.buildTrayContent(a)},buildTrayContent:function(j){var i,h=this.get("tray"),b=this.isTrayTypeTrending(),a=this.getQuery();i=this.getTrayHtml(j),this.fire(ac),h.len>0?(h.Node.setHTML(i),this.fire(ae,{trending:b,query:a,suggestionMarkup:i,firstSuggestion:this._firstSuggestion,jsonData:j})):(this.update_tabCount(),this.closeTray(),this.fire(ad,{query:a}),aU.log("closed the tray, since tray.len is 0","debug",aT))},buildSuggestion:function(a){var d=aU.Node.create("<li>"+a+"</li>");return d},getTrayHtml:function(a1){var a0,aZ,aY,aX,aW,aV,W,T,S,R,G,E,D,r=0,p=this,V=this,U=p.getQuery(),H=this.isTrayTypeTrending(),C=0,q=this.getTray(),o=!1,n=!1,m=this.get("currentDevice"),i="desktop"===m&&!this.get("ieTillSeven")&&this.get("subAssist")&&a1.sqpos&&aU.Lang.isNumber(a1.sqpos),d=this.getQuery(),b=this.get("enableTruncation")&&("tablet"===m||"phone"===m);if(a0=a1.r,G=this.getDefaultSuggArrParam(),this.get("_externalDS")){try{if(!a1.results){throw aU.error("results has no data, check schema and server data")}G=this.get("_suggArrayParam"),a0=a1.results}catch(a){aU.log("error"+a,"error"),aU.log(JSON.stringify(a1,null,"  "),"error")}}if(aZ=a0.length,this._offsetWidth=0,this._isWidthComputed=!1,aY=this.buildEmptyTray(),q&&q.Node&&b&&q.Node.addClass(am),a1&&a1.l&&(D=this._setGprid(a1.l.gprid)),aU.log("Gprid:"+D,"debug",aT),q&&(q.origLen=aZ,q.len=0),aZ>0){for(q&&q.Node&&this.computeQueryWidthOnDOM(d,q,aY),aZ>this.get("maxSuggests")&&(aZ=this.get("maxSuggests")),r=0;aZ>r;r+=1){aW=a0[r][G],aX=aU.Escape.html(a0[r][G]),0===r&&(this._firstSuggestion=aX),b?(E=this.computeTruncation(aX,q,aY,this.get(aR).get("clientWidth")),aV=E.truncated?this.highlightSuggestion("..."+E.text,U,aW):this.highlightSuggestion(aX,U,aW)):aV=this.highlightSuggestion(aX,U,aW),i&&!this.isQueryPastSearchBox()?(this._subAssistReady=!0,S=d.substr(a1.sqpos),T=aW.substr(a1.sqpos),T=this.trimEndSpace(T),T&&(aV=this.highlightSuggestion(T,S),q&&q.Node&&!q.Node.hasClass(ap)&&(q.Node.addClass(ap),q.Node.addClass(an)),q&&q.Node&&!this._isWidthComputed&&(this._isWidthComputed=!0,R=d.substr(0,a1.sqpos),this._offsetWidth=this.computeListItemWidth(R,q,aY,!0)-this._sbxPadLeftInt-(this._listItemPadLeftInt||0)+aM))):(this._subAssistReady=!1,this.removeSubAssist(q)),aV&&(W=aU.Node.create("<li>"+aV+"</li>"),W.setAttribute("pos",r+1),W.setAttribute("data",encodeURIComponent(aW)),H&&(a0[r][aG]!==aF||o||(o=!0,W.addClass(ar)),a0[r][aE]!==aD||n||(n=!0,W.addClass(aq))),this.get("webHistory")&&a0[r][aI]===aH&&W.setAttribute("type","history"),!this.get("mobileAutoComplete")||"tablet"!==m&&"phone"!==m||V.addAutoCompleteBtn(W),C+=1,aY.append(W))}return q&&(q.len=C),aU.log("Printing Tray markup","debug",aT),aU.log(aY.getHTML(),"debug",aT),aY}return this.get("mobileExpandMode")&&q&&0===C&&""!==U?aY=V.updateSuggOnNoSugg(U,aY):void 0},computeQueryWidthOnDOM:function(e,d,f){return this._queryWidth=this.computeListItemWidth(e,d,f,!0),this._queryWidth},isQueryPastSearchBox:function(){var b=this._queryWidth,a=this.get(aR).get("clientWidth")-this._sbxPadLeftInt;return b>a-this._sbxPadRightInt?(aU.log("textWidth:"+b+"greater than sbxWidth:"+a,"debug",aT),!0):!1},handleSubAssistReady:function(){var e,d,f=this.get("tray");this._subAssistReady&&(d=this.get(aR).get("clientWidth"),e=f.Node.get("clientWidth"),this._offsetWidth+e>d&&(f.Node.removeClass(an),this._offsetWidth=d-f.Node.get("clientWidth")),f.Node.setStyle("left",this._offsetWidth+"px"))},removeSubAssist:function(b){b&&b.Node&&(b.Node.removeClass(ap),b.Node.removeClass(an),b.Node.removeClass(ao))},getSearchBoxPadding:function(f){var d,h=this.get(aR),g=0;return"left"===f&&(d=h.getStyle("paddingLeft")),"right"===f&&(d=h.getStyle("paddingRight")),g=this.convertPxToInt(d)},convertPxToInt:function(d){var c=0;return d&&d.length>1&&(d=d.substr(0,d.length-2),c=parseInt(d,10)),c},computeTruncation:function(a,n,m,l){var k,j,i=aU.Node.create('<li class="measurer"><b class="yui3-highlight">'+aU.Escape.html(a)+"</b></li>");return n.Node.addClass(al),n.Node.addClass(ak),i.addClass(aj),m.append(i),n.Node.setHTML(m),j=0,i.setHTML('<li class="measurer"><b class="yui3-highlight">'+a+"</b></li>"),k=i.get("clientWidth"),l>k?(i.remove(),n.Node.removeClass(al),n.Node.removeClass(ak),{text:a,truncated:!1}):(j=l>k-30?7:l>k-60?14:l>k-90?21:l>k-120?28:35,i.remove(),n.Node.removeClass(al),n.Node.removeClass(ak),{text:a.substr(j),truncated:!0})},computeListItemWidth:function(a,l,k,j){var i,h=aU.Node.create('<li><b class="yui3-highlight">'+aU.Escape.html(a)+"</b></li>");return l.Node.addClass(al),j&&(l.Node.addClass(ak),h.addClass(aj)),k.append(h),l.Node.setHTML(k),void 0===this._listItemPadLeftInt&&(this._listItemPadLeftInt=this.convertPxToInt(h.getStyle("paddingLeft"))),i=l.Node.get("clientWidth"),h.remove(),l.Node.removeClass(al),j&&l.Node.removeClass(ak),l.Node.setHTML(""),i},isTrendingTitleAttached:function(){return aU.one("."+ay)?!0:!1},isTrayTrending:function(){var b=this,a=this;return !b.isTrendingEnabled()||a.getQuery()||this.isTrayEmpty()?!1:(aU.log("Trending tray is open","debug",aT),b.get(aR).focus(),!0)},setRenderedTrayType:function(b){this.trayType=b},getRenderedTrayType:function(){return this.trayType},isTrayTypeTrending:function(){return this.getRenderedTrayType()===aC?(aU.log("tray type is Trending","debug",aT),!0):(aU.log("tray type is normal","debug",aT),!1)},removeTrayHtml:function(){var b=this.get("tray");b&&b.Node&&(b.Node.remove(!0),delete b.Node,this.fire(ab))},removeSuggestionsMarkup:function(){var a=this;aU.log("removing Markup for Suggestions","debug",aT),this.isRenderMode(X)&&this.removeTrayHtml(),this.get("fakeBox")&&!this.get("ieTillEight")&&(this.ghost&&this.ghost.cancel(),a.resetFBox())},isRenderMode:function(e){var d=this,f=d.get("renderMode");return f===e?!0:void 0},buildSuggestionsMarkup:function(a){aU.log("Building Markup for Suggestions","debug",aT),this.isRenderMode(X)&&this.buildTray(a)},_defEvtRespRecvdFn:function(f){var b=this,a=b.get("spellCheck");aU.log("~~~~~~~~~~~number of suggest server hits"+b._totalHitsToSuggestServer,"debug",aT),aU.log("~~~~~~~~~~~number of cache hits"+b._totalHitsToCache,"debug",aT),f&&f.jsonData?(a&&this.spellCheck(f.jsonData),this.buildSuggestionsMarkup(f.jsonData)):aU.log("no data received from suggest server","debug",aT)},_defEvtNoRespRecvdFn:function(){var b=this,a=this;aU.later(100,this,function(){a.closeTray()}),aU.log("~~~~~~~~~~~number of suggest server hits"+b._totalHitsToSuggestServer,"debug",aT),aU.log("~~~~~~~~~~~number of cache hits"+b._totalHitsToCache,"debug",aT),aU.log("no response received from suggest server:"+this.get("baseUrl"),"debug",aT)},_defEvtSuggestMarkupRendered:function(r){aU.log("Suggest has been attached to DOM: RENDER complete","debug",aT);var q=this,p=this.get("tray"),o=this.get("branding"),n=this,m=this,l=this.get("mobileExpandMode"),b=this.isTrendingEnabled(),a=this.isTrendingTitleEnabled();return b||""!==m.getQuery()?(this.handleSubAssistReady(),p&&p.Node&&(r.trending?(this.attachTrendingTrayLabels(p.Node),p.Node.setAttribute("type",aC),a&&p.Node.insertBefore('<div class="trayTitle"><span class="icon trendingGray"></span><span class="title">TRENDING NOW</span></div>',p.Node.one("."+az))):p.Node.setAttribute("type",aB),o&&p.Node.append('<div class="'+ai+" "+o.mode+' ">'+o.label+"</div>")),this.fire(ag,{mobileExpandMode:l}),void (l&&n.widenTray())):void q.closeTray()},addNewSuggestion:function(l){var k,j=this.getTray(),i=l.markup||"",b=aU.one("."+az),a=l.suggestionText||"";aU.log("adding new suggestion","debug",aT),this.buildTrayNode(),b||(aU.log("Building empty tray","debug",aT),b=this.buildEmptyTray(),j.Node.setHTML(b)),j&&j.Node&&b&&(aU.log("tray and tray.Node and trayListContainer exist","debug",aT),k=aU.Node.create('<li class="'+at+'">'+i+"</li>"),k.setAttribute("data",encodeURIComponent(a)),l.prepend?b.prepend(k):b.append(k))}})},"0.0.1",{requires:["search-assist-aria-plugin","search-assist-config-panel-plugin","search-assist-history-suggestions-plugin","search-assist-smw-suggestions-plugin","search-assist","search-assist-core","search-assist-linktrack","search-assist-navigate","intl"]}),YUI.add("search-assist-ult",function(g){function f(x){var w,v,u,t,s,r,q,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-",o="",n=x.length,m=0;do{w=x.charCodeAt(m++),v=x.charCodeAt(m++),u=x.charCodeAt(m++),t=w>>2,s=(3&w)<<4|v>>4,r=(15&v)<<2|u>>6,q=63&u,isNaN(v)?r=q=64:isNaN(u)&&(q=64),o+=p.charAt(t)+p.charAt(s)+p.charAt(r)+p.charAt(q)}while(n>m);return o}function j(e){var d,k;for(d=0,k=e.length;k>d;d++){if(e.charCodeAt(d)<32){return !0}}return !1}var i=g.Lang,h=g.namespace("SA");h.ULT||(h.ULT={}),g.mix(h.ULT,{SRC_SPACEID_KEY:"_S",DEFAULT_BEACON_URL:"http://geo.yahoo.com/t",beacon:function(k){var e=this.DEFAULT_BEACON_URL,m=this.instrument(e,k)+"?t="+Math.random(),l=new Image;l.onload=l.onerror=function(){l.onload=l.onerror=null,l=null},l.src=m},instrument:function(r,q){var p,o,e="",d="",c="_r",b=[],a=[];if(!i.isObject(q)){return r}if(!q[h.ULT.SRC_SPACEID_KEY]){if(!g.config.i13n||!g.config.i13n.spaceid){return r}q[h.ULT.SRC_SPACEID_KEY]=g.config.i13n.spaceid}return q[c]=2,o=0,g.each(q,function(l,k){if(!i.isString(l)){try{l=l.toString()}catch(m){return r}}return k.length<1||k.length>8||-1!==k.indexOf(" ")||j(k)||j(l)?(b=[],r):void (b[o++]=k)}),b.length?(b=b.sort(),o=0,g.each(b,function(l){var k=q[l];a[o++]=l+e+k}),p=a.join(d),p.length<1||p.length>1024?r:(p=";_ylc="+f(p),o=r.indexOf("/*"),-1===o&&(o=r.indexOf("/?")),-1===o&&(o=r.indexOf("?")),-1===o?r+p:r.substr(0,o)+p+r.substr(o))):r}})},"0.0.1",{requires:["event-delegate","querystring-stringify"]}),YUI.add("search-assist",function(a9,a8){var a7=a9.namespace("Client-Side-Search-Assist"),a6="tray",a5=4,a4=!1,a3=!1,a2=!1,a1=!1,a0=!1,aZ=!1,aY=!1,aX=!0,aW=a6,aV="desktop",aU=!0,aT=!1,aS="web",aR="us",aQ=0,aP=null,aO=null,aN=null,aM=null,aL=!1,aK="en-US",aE=0,aC="k",aB="search.yahoo.com",aA=!1,az="searchBoxContainer",ay="searchForm",ax="sa-sbx-container",aw="sa",av="lowlight",au="sa-device",at="sa-skin",ar="mobile-expand-sbx-wrapper",aq="search-assist-form-wrapper",ap="search.yahoo.com",ao="sugg",an="gossip",am="ss",al=3,ak=!0,aj={bcrumb:(new Date).getTime(),crumb:(new Date).getTime(),maxSuggestions:al,highlightHistory:ak},ai=3,ah={crumb:(new Date).getTime(),maxSuggestions:ai},ag=!1,af=!1,ae={},ad={label:"Search Suggest by Yahoo",mode:"regular"},aH=!1,bc={spaceId:aP,csrcpvid:aO,vtestid:aN,mtestid:aM},aD={lat:null,lon:null,woeid:null},ba={expandMode:!1,skin:"phone",disablePlaceHolder:!1},aI={expandMode:!1,skin:"desktop",disablePlaceHolder:!0},aF={expandMode:!1,skin:"tablet",disablePlaceHolder:!0},aa={desktop:aI,phone:ba,tablet:aF},aJ={RELATED_TITLE:"Related Searches",TRENDING_NOW_TITLE:"Trending Searches",MOBILE_SEARCH_FOR_TITLE:"Search For",MOBILE_EXIT_BUTTON_TITLE:"cancel",MOBILE_END_PIECE_TITLE:"Press Enter To Search",MOBILE_PLACEHOLDER_TITLE:"Search"},aG={US:!0,AR:!0,AU:!0,BR:!0,CA:!0,DE:!0,ES:!0,FR:!0,QC:!0,HK:!0,ID:!0,IN:!0,IT:!0,KR:!0,MX:!0,MY:!0,NZ:!0,PH:!0,SG:!0,TH:!0,TW:!0,UK:!0,ESPANOL:!0,MALAYSIA:!0,VN:!0,AT:!0,CH:!0,CL:!0,CO:!0,DK:!0,FI:!0,NL:!0,NO:!0,PE:!0,RU:!0,SE:!0,VE:!0},ac={"en-US":{web:0,sports:102,image:103,news:104,directory:108,video:112,audio:115,finance:596,"autos-vertical":609,"autos-related":610,"autos-also-try":611,"music-web-backfill":1002,shine:1003,omg:1004,games:1005,dictionary:1306,answers:1307,"answers-vertical":1317,"movie-vertical":1308,"movie-web-backfill":1308,"shopping-vertical":1312},"es-AR":{web:0,image:287,news:288,video:292,blog:359,answers:1307,"answers-vertical":1317},"de-AT":{web:0},"en-AU":{web:0,image:231,news:232,directory:234,video:236,lifestyle:1101,sports:1102,tv:1103,finance:1104,movie:1105,recipe:1106,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"pt-BR":{web:0,image:244,news:245,video:249,answers:1307,"answers-vertical":1317},"en-CA":{web:0,image:396,news:397,directory:399,video:401,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"fr-CA":{web:0,image:411,news:412,directory:414,video:416,answers:1307,"answers-vertical":1317},"fr-CH":{web:0},"it-CH":{web:0},"de-CH":{web:0},"es-CL":{web:0},"es-CO":{web:0},"de-DE":{web:0,audio:132,image:350,news:351,directory:352,local:354,video:356,mobile:362,answers:1307,"answers-vertical":1317},"da-DK":{web:0},"es-US":{web:0,image:382,news:383,directory:385,video:387,answers:1307,"answers-vertical":1317},"es-ES":{web:0,image:302,news:303,directory:304,local:306,video:308,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"se-FI":{web:0},"sv-FI":{web:0},"fi-FI":{web:0},"fr-FR":{web:0,image:318,news:319,directory:320,local:322,video:324,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"zh-Hant-HK":{web:0,blog:122,news:134,forum:135,image:147,audio:148,directory:149,knowledge:152,video:153,"shopping-vertical":1301,dictionary:1306},"id-ID":{web:0,image:467,news:468,audio:469,directory:470,video:472,answers:1307,"answers-vertical":1317},"en-IN":{web:0,image:426,news:427,directory:429,local:431,video:433,answers:1307,"answers-vertical":1317},"it-IT":{web:0,image:366,news:367,directory:368,local:370,video:372,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"es-MX":{web:0,image:272,news:273,video:277,mobile:283,answers:1307,"answers-vertical":1317},"en-MY":{web:0,image:453,news:454,directory:456,video:458,blog:461,answers:1307,"answers-vertical":1317},"ms-MY":{web:0,image:453,news:454,directory:456,video:458,blog:461,answers:1307,"answers-vertical":1317},"nl-NL":{web:0},"se-NO":{web:0},"nb-NO":{web:0},"nn-NO":{web:0},"en-NZ":{web:0,image:531,news:532,video:536,lifestyle:1201,sports:1202,finance:1203,movie:1204,"movie-web-backfill":1308,recipe:1205,answers:1307,"answers-vertical":1317},"qu-PE":{web:0},"es-PE":{web:0},"en-PH":{web:0,image:482,news:483,directory:485,video:487,answers:1307,"answers-vertical":1317},"ru-RU":{web:0},"tt-RU":{web:0},"se-SE":{web:0},"su-SE":{web:0},"en-SG":{web:0,image:216,news:217,directory:219,video:221,answers:1307,"answers-vertical":1317},"th-TH":{web:0,image:497,news:498,video:502,answers:1307,"answers-vertical":1317},"zh-Hant-TW":{web:0,image:183,news:184,audio:185,directory:186,knowledge:189,video:190,blog:193,academia:195,mobile:197,wretch:548,"shopping-srp-vertical":1301,"shopping-mall-vertical":1302,"shopping-store-vertical":1303,"auction-vertical":1304,"service-vertical":1305,"shopping-category-vertical":1322,"shopping-store-category-vertical":1323,"auction-category-vertical":1324,dictionary:1306},"cy-GB":{web:0,audio:131,image:334,news:335,directory:336,local:338,video:340,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"en-GB":{web:0,audio:131,image:334,news:335,directory:336,local:338,video:340,"movie-vertical":1308,"movie-web-backfill":1308,answers:1307,"answers-vertical":1317},"es-VE":{web:0},"vi-VN":{web:0,image:513,news:514,video:518,blog:521,answers:1307,"answers-vertical":1317}};ac["zh-HK"]=ac["zh-Hant-HK"],ac["zh-TW"]=ac["zh-Hant-TW"],a7=function(){a7.superclass.constructor.apply(this,arguments)},a9.mix(a7,{NAME:"SearchAssist",ATTRS:{property:{value:aS,setter:function(b){return void 0===this.getPubId(b)?aS:b}},translation:{valueFn:function(){return aJ},setter:function(a){return a9.mix(a,aJ),a}},pubid:{setter:function(b){return b},valueFn:function(){var d,c=this.get("property");return d=this.getPubId(c),"undefined"!==d?d:aQ}},ylt:{value:null},yltCustom:{value:null},action:{valueFn:function(){if(this.get("yltCustom")){var f,e=this.get("searchForm").getAttribute("action"),h=e.split(/[;\?]+/),g=/_ylt/gi;for(this.set("action",e),f=0;f<h.length;f+=1){g.test(h[f])&&this.set("ylt",h[f])}return e}return""}},reverseHighlight:{value:aU},market:{value:aR},dataSrc:{setter:function(a){var f=a.url,e=this;if(!f){throw a9.error("No url inside dataSrc config param")}return a9.log("dataSrc.url: "+a.url,"debug"),e.flushCache(),a},valueFn:function(){this._newProperty=this.get("property");var a=this.intlTheUrl();return a9.log("valueFn"+a,"debug"),{url:a,params:null}}},baseUrl:{getter:function(){return this.get("dataSrc").url}},_externalDS:{valueFn:function(){return this.get("dataSrc").params?this.get("dataSrc"):!1},getter:function(){return this.get("dataSrc").params?this.get("dataSrc"):!1}},_suggArrayParam:{value:aC},quietMode:{value:aT,setter:function(a){return a9.Lang.isBoolean(a)?a:void 0}},allowCache:{value:aH,setter:function(a){return a9.Lang.isBoolean(a)?a:void 0}},cancelButton:{value:!1},maxSuggests:{value:a5},searchBox:{initOnly:!0,setter:function(a){var d=a9.one(a);return d||a9.error("Invalid Search Box id specified"+a),"off"!==d.getAttribute("autocomplete")&&d.setAttribute("autocomplete","off"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setStyles({"-webkit-tap-highlight-color":"transparent"}),d}},searchForm:{valueFn:function(){return this.get("searchBox").get("form")},setter:function(a){var d=a9.one(a);return d||a9.error("not a valid search form node"+a),d},getter:function(){return this.get("searchBox").get("form")}},preventFormSubmit:{value:!1},hostNodeToAttach:{setter:function(a){return a9.one(a)?a9.one(a):null}},fakeBox:{value:aL},fakeBoxNode:{getter:function(){return a9.one("#fakeBox")}},fakeBoxHintNode:{getter:function(){return a9.one("#fakeBoxHint")}},searchBoxContainer:{valueFn:function(){var a,d=a9.Node.create("<div></div>");return d.generateID(),a=this.get("hostNodeToAttach"),a||(a=this.get(ay)),a.append(d),d.addClass(ax),d}},gossipParams:{value:ae,setter:function(b){return b}},saFormWrapper:{valueFn:function(){return this.get("searchForm").wrap('<div class="'+aq+'"></div>'),a9.one("."+aq)}},saContainer:{valueFn:function(){var a=a9.Node.create("<div></div>");return a.generateID(),this.get(az).append(a),a.addClass(aw),this.get("reverseHighlight")&&a.addClass(av),a}},ieTillFive:{valueFn:function(){return a9.UA.ie>0&&a9.UA.ie<6?!0:!1}},ieTillSix:{valueFn:function(){return a9.UA.ie>0&&a9.UA.ie<7?!0:!1}},ieTillSeven:{valueFn:function(){return a9.UA.ie>0&&a9.UA.ie<8?!0:!1}},ieTillEight:{valueFn:function(){return a9.UA.ie>0&&a9.UA.ie<9?!0:!1}},allIe:{valueFn:function(){return a9.UA.ie>0?!0:!1}},gecko:{valueFn:function(){return a9.UA.gecko>0?!0:!1}},mbxWrapperNode:{initOnly:!0,setter:function(a){return a9.one(a)}},appId:{valueFn:function(){return a9.config.win.location.hostname||aB},setter:function(b){return b}},exitScreenButton:{value:!1},sendBCookie:{value:aX,setter:function(a){return a9.Lang.isBoolean(a)?a:void 0}},bcookie:{valueFn:function(){return encodeURIComponent(a9.Cookie.get("B"))||encodeURIComponent(a9.Cookie.get("BX"))||null}},smw:{lazyAdd:!1,setter:function(a){return a?(this._smwPlugged||(this._smwPlugged=!0,this.plug(a9.SEARCHASSIST.SmwSuggestionsPlugin)),a9.mix(a,ah),a):(this._smwPlugged=!1,this.unplug(a9.SEARCHASSIST.SmwSuggestionsPlugin),!1)}},spellCheck:{value:ag,setter:function(a){return a9.Lang.isBoolean(a)?a:void 0}},disableHighlight:{value:af,setter:function(a){return a9.Lang.isBoolean(a)?a:void 0}},spellCheckNode:{getter:function(){return a9.one("#spellCheckBox")}},webHistory:{lazyAdd:!1,setter:function(a){return a?(!this._webHistoryPlugged&&a.highlightHistory&&(this._webHistoryPlugged=!0,this.plug(a9.HistorySuggestionsPlugin)),a9.mix(a,aj),a):(this._webHistoryPlugged=!1,this.unplug(a9.HistorySuggestionsPlugin),!1)}},branding:{setter:function(a){return a?(a9.mix(a,ad),a):!1}},ariaPlug:{value:!1},renderMode:{value:aW},enableTrending:{value:a4,setter:function(b){return this._origETVal=b,b},getter:function(){return this.checkUrlSupportForEmptyQuery()&&this._origETVal}},enableTrendingTitle:{value:null},autoAlign:{value:a3},anyKeySearch:{value:a1},backspaceBehaviorNative:{value:a0},replaceQueryOnFocus:{value:aZ},noSpaceOnFocus:{value:aY},disablePlaceHolder:{value:!1,getter:function(){return this.get("device")[this.get("currentDevice")].disablePlaceHolder}},configPanel:{value:null},skin:{getter:function(){return this.get("device")[this.get("currentDevice")].skin}},currentDevice:{valueFn:function(){var a;return a=a9.UA.mobile?a9.UA.iphone>0?"phone":"tablet":"desktop"},setter:function(a){return"phone"!==a&&"tablet"!==a&&"desktop"!==a?(a9.log("invalid device type specified"+a+".device type has to be phone tablet or desktop","error"),aV):(this.get("device")[a].expandMode===!0&&this.createMobileWrapper(),a)}},mobileExpandMode:{value:!1,getter:function(){return this.get("device")[this.get("currentDevice")].expandMode}},device:{valueFn:function(){return aa},setter:function(a){return a9.mix(a,aa),a9.mix(a.phone,ba),a9.mix(a.desktop,aI),a9.mix(a.tablet,aF),a}},ultEnabled:{setter:function(a){return a9.Lang.isBoolean(a)?a:void 0},valueFn:function(){return !1}},ult:{setter:function(a){return a9.mix(a,bc),a9.Lang.isString(a.spaceId)?a:bc}},enableTruncation:{value:!1},mobileAutoComplete:{value:!1},logAutoComplete:{value:!1},minKey:{setter:function(a){return a9.Lang.isNumber(a)&&a>=0?a:(a9.log("minKey can take numbers ranging [0, )","error"),aE)},value:aE},subAssist:{value:a2},lang:{value:aK,setter:function(b){return b}},https:{value:aA,setter:function(b){return b}},geo:{valueFn:function(){return aD},setter:function(a){return a9.mix(a,aD),a}},extraUltParams:{value:{},setter:function(a){return a9.Lang.isObject(a)?a:(a9.log("erroneous ultExtraParams provided, make sure its an object","error"),{})}}}}),a9.SEARCHASSIST=a9.extend(a7,a9.Base,{initializer:function(b){var a=this;a9.log("instantiating SearchAssist","debug",a8),b=b||{},a9.log("cfg-Obj:","debug",a8),a9.log(b,"debug"),this._allSubscr={},this.get("ult")&&this.set("ultEnabled",!0),this.setDeviceClass(),this.get("mobileExpandMode")===!0&&this.createMobileWrapper(),this._isCookieSetForSAActive()===!0?this.set("quietMode",!1):this.set("quietMode",!0),this.on("quietModeChange",a.handleQuietModeChange),this.on("autoAlignChange",a.handleAutoAlignChange),this.on("propertyChange",a.handlePropertyChange),this.after("langChange",a.handleLangChange),this.after("webHistoryChange",a.updateDataSrcUrl),this.after("httpsChange",a.updateDataSrcUrl),this.after("ultChange",a.setUltStatus),this._origProperty=this.get("property"),this._newProperty=this.get("property")},setUltStatus:function(b){b.newVal?this.set("ultEnabled",!0):this.set("ultEnabled",!1)},setDeviceClass:function(){var a=this.get("currentDevice"),f=this.get("skin"),e=a9.one("html");e&&(e.removeClass(au+"-phone"),e.removeClass(au+"-tablet"),e.removeClass(au+"-desktop"),e.addClass(au+"-"+a),e.removeClass(at+"-phone"),e.removeClass(at+"-tablet"),e.removeClass(at+"-desktop"),e.addClass(at+"-"+f))},checkUrlSupportForEmptyQuery:function(){return this._urlSupportsTrending||this.get("dataSrc")&&this.get("dataSrc").supportsEmptyQuery?!0:!1},getDefaultSuggArrParam:function(){return aC},_isCookieSetForSAActive:function(){var a=a9.config.doc.cookie.match(/(?:^|\s*;\s*)SP=(?:[^&]*&)?a=(\d)(?:&|;)?/);return a&&"0"===a[1]?!1:!0},_detachAllSubscriptions:function(){var b,a=this._allSubscr;if(a){for(b in a){a.hasOwnProperty(b)&&(a9.log("detaching subscription: "+b,"debug",a8),a[b].detach())}}},updateDataSrcUrl:function(){var b=this.intlTheUrl();b&&this.set("dataSrc",{url:b})},getPubIdForProp:function(f,b){var a=ac[b];return a&&void 0!==a[f]?a[f]:(a9.log("No PubId found for lang="+b+" and property="+f,"warn",a8),aQ)},handleLangChange:function(d){var c;this.updateDataSrcUrl(d),c=this.getPubIdForProp(this._newProperty,this.get("lang")),this.set("pubid",c)},handlePropertyChange:function(h){var g=h.newVal,b=this,a=this.getPubId(g);void 0!==a?(this.set("pubid",a),b.flushCache()):(a=this.getPubId(this._origProperty),a9.log("no Pubid for the given property:"+g,"warn",a8),a9.log("defaulting to pubid for original property:"+this._origProperty,"warn",a8),void 0!==a?(this.set("pubid",a),b.flushCache()):(a9.log("defaulting to pubid"+aQ,"warn",a8),this.set("pubid",aQ))),this._newProperty=g,this.handleLangChange()},handleAutoAlignChange:function(a){var h=a.newVal,g=this._allSubscr,f=this;h===!1&&(a9.log("autoAlign has been set to false.. deregistering it","debug"),f.alignTrayDeregisteration()),h===!0&&(a9.log("autoAlign has been set to true.. reregistering it","debug"),g&&!g._autoAlignRegistered&&f.alignTrayRegisteration())},handleQuietModeChange:function(b){var a=b.newVal;a!==!1||this._initDone||(this._initDone=!0,a9.log("reattach all subscriptions","debug",a8),this.coreInit(),this.clientInit(),this.navInit(),this.trayInit()),a===!0&&(a9.log("detach all subscriptions",a8),this.closeTray(),this._detachAllSubscriptions(),this._initDone=!1)},isTrendingEnabled:function(){return this.get("enableTrending")},isTrendingTitleEnabled:function(){return this.get("enableTrendingTitle")},createMobileWrapper:function(){a9.one("."+ar)||(this.get("searchBox").wrap('<div class="'+ar+'"></div'),this.set("mbxWrapperNode","."+ar))},getPubId:function(h){var g=this,b=g.get("lang"),a=ac[b];return a&&"undefined"!==a[h]?a[h]:(a9.log("no valid pubid found for lang="+b+"property="+h,"warn",a8),a9.log("using default pubid","warn",a8),aQ)},intlTheUrl:function(){return this.setMarket(),this.langifySuggestUrl()},langifySuggestUrl:function(){var l,k,j,i=this.get("lang"),b=this.get("market"),a=this._newProperty;switch(a&&(a=a.toLowerCase()),k="http"+(this.get("https")===!0?"s":""),l=k+"://"+b+"."+ap+"/"+ao+"/"+an+"/gossip-"+("malaysia"===b?"my":b),this._urlSupportsTrending=!1,i){case"en-US":switch(j=k+"://"+ap+"/"+ao+"/",a){case"web":l=j+an+"/gossip-us-ura",this._urlSupportsTrending=!0;break;case"sports":case"image":case"news":case"directory":case"video":case"audio":case"shine":case"omg":case"games":case"finance":l=j+am+"/gossip-us_ss";break;case"autos-vertical":case"movie-vertical":case"shopping-vertical":case"dictionary":l=j+an+"/gossip-us-vertical_ss";break;case"answers-vertical":case"answers":l=j+am+"/gossip-us_ss-vertical_ss";break;case"autos-related":l=j+an+"/gossip-us-seaview";break;case"autos-also-try":l=j+an+"/gossip-us-falcon";break;case"music-web-backfill":l=j+an+"/gossip-us-uh";break;case"movie-web-backfill":l=j+an+"/gossip-us-uh_ss";break;default:l=j+an+"/gossip-us-ura",this._urlSupportsTrending=!0}break;case"es-AR":case"pt-BR":case"de-DE":case"id-ID":case"en-IN":case"es-MX":case"en-MY":case"ms-MY":case"en-PH":case"en-SG":case"th-TH":case"vi-VN":("answers"===a||"answers-vertical"===a)&&(l+="-vertical_ss");break;case"fr-CA":l=k+"://"+b+"."+ap+"/"+ao+"/"+an+"/gossip-ca_fr",("answers"===a||"answers-vertical"===a)&&(l+="-vertical_ss");break;case"en-AU":case"en-CA":case"es-ES":case"fr-FR":case"it-IT":("movie-vertical"===a||"answers"===a||"answers-vertical"===a)&&(l+="-vertical_ss"),"movie-web-backfill"===a&&(l+="-uh_ss");break;case"en-NZ":("answers"===a||"answers-vertical"===a)&&(l+="-vertical_ss"),"movie-web-backfill"===a&&(l+="-uh_ss");break;case"zh-HK":case"zh-Hant-HK":switch(a){case"web":l+="-ura",this._urlSupportsTrending=!0;break;case"dictionary":case"shopping-vertical":l+="-vertical_ss"}break;case"zh-TW":case"zh-Hant-TW":switch(a){case"web":l+="-ura",this._urlSupportsTrending=!0;break;case"dictionary":case"shopping-srp-vertical":case"shopping-mall-vertical":case"shopping-store-vertical":case"auction-vertical":case"service-vertical":case"shopping-category-vertical":case"shopping-store-category-vertical":case"auction-category-vertical":l+="-vertical_ss"}break;case"en-GB":case"cy-GB":switch(a){case"web":l+="-ura",this._urlSupportsTrending=!0;break;case"movie-vertical":case"answers":case"answers-vertical":l+="-vertical_ss";break;case"movie-web-backfill":l+="-uh_ss"}break;case"es-US":l=k+"://"+b+"."+ap+"/"+ao+"/"+an+"/gossip-e1",("answers"===a||"answers-vertical"===a)&&(l+="-vertical_ss");break;default:a9.log("default case, no special url treatment for this property and language","info")}return a9.log("gossip url:"+l,"debug",a8),l+="/"},setMarket:function(){function j(d){return aG[d]?!0:(a9.log("invalid market:"+d,"warn",a8),a9.log("available markets:"+aG,"warn"),!1)}var i=this.get("lang"),h=i.split("-"),b="",a=h.length;a9.Lang.isArray(h)&&a>0&&h[a-1]&&(b=h[a-1]),"fr-CA"===i&&(b="QC"),("en-GB"===i||"cy-GB"===i)&&(b="UK"),"es-US"===i&&(b="ESPANOL"),("en-MY"===i||"ms-MY"===i)&&(b="MALAYSIA"),j(b)||(b=aR),this.set("market",b.toLowerCase())}})},"0.0.1",{requires:["base","cookie","intl"]});